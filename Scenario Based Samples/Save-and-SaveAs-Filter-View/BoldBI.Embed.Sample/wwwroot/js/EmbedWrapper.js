(()=>{"use strict";var e,t={590:(e,t)=>{let i,n;t.NV=void 0;class s{constructor(){this.loadPinboard=this.Invoke((function(){if(!this.invalidDetail){if(""==this.embedOptions.pinboardName)throw new Error("Pinboard name should not be empty");if(this.embedOptions.mode!=s.Mode.View)throw new Error("Cant able to render the Pinboard in design mode");if(this.embedOptions.embedType==s.EmbedType.Component)this.isWidgetMode=!1,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="",this._showLoader(),this._isDependencyLoaded(this);else if(this.embedOptions.embedType==s.EmbedType.IFrame){const e=document.createElement("iframe");e.frameBorder=0,e.width=this.embedOptions.width,e.height=this.embedOptions.height,e.id=this.embedOptions.embedContainerId+"_"+this.embedOptions.dashboardId,e.allowfullscreen=this.embedOptions.dashboardSettings.showFullScreen,e.setAttribute("src",this.embedOptions.serverUrl+"/dashboards/"+this.embedOptions.dashboardId+"?isembed=true"),document.getElementById(this.embedOptions.embedContainerId).appendChild(e)}}})),this.loadDatasource=this.Invoke((function(){if(!this.invalidDetail){if((this.embedOptions.dashboardId||this.embedOptions.dashboardPath)&&(this.embedOptions.dashboardId=this.embedOptions.dashboardPath=""),""!=this.embedOptions.pinboardName&&(this.embedOptions.pinboardName=""),this.embedOptions.mode!=s.Mode.DataSource&&this.embedOptions.mode!=s.Mode.Connection)throw new Error("Invalid embed Mode");if(this.embedOptions.embedType==s.EmbedType.Component)this.isWidgetMode=!1,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="",this._showLoader(),this._isDependencyLoaded(this);else if(this.embedOptions.embedType==s.EmbedType.IFrame){const e=document.createElement("iframe");e.frameBorder=0,e.width=this.embedOptions.width,e.height=this.embedOptions.height,e.id=this.embedOptions.embedContainerId+"_"+this.embedOptions.datasourceId,e.allowfullscreen=this.embedOptions.dashboardSettings.showFullScreen,e.setAttribute("src",this.embedOptions.serverUrl+"/datasource-designer/"+this.embedOptions.datasourceId+"?isembed=true"),document.getElementById(this.embedOptions.embedContainerId).appendChild(e)}}})),this._initializeUrls=this.Invoke((function(){if(this.embedOptions.serverUrl.indexOf("/bi")<=0)throw new Error("Invalid Bold BI serverUrl.");return this.embedOptions.environment==s.Environment.Enterprise?(this.rootUrl=this.embedOptions.serverUrl.substr(0,this.embedOptions.serverUrl.indexOf("/bi/")>=0?this.embedOptions.serverUrl.indexOf("/bi/")+3:this.embedOptions.serverUrl.indexOf("/bi")+3),this.baseUrl=this.embedOptions.serverUrl,this.siteIdentifier=this.embedOptions.serverUrl.indexOf("/site/")>=0?this.embedOptions.serverUrl.substr(this.embedOptions.serverUrl.indexOf("/site/")+1):"",this.dashboardServerApiUrl=this.rootUrl+"/api"+(this._isEmptyOrSpaces(this.siteIdentifier)?"":"/"+this.siteIdentifier),this.designerRootUrl=this.rootUrl+"/designer",this.customThemeUrl=this.rootUrl.replace(/\/bi(?!.*\/bi)/,"/ums/theme/styles")):(this.rootUrl=this.embedOptions.serverUrl.endsWith("/")?this.embedOptions.serverUrl.slice(0,-1):this.embedOptions.serverUrl,this.baseUrl=this.embedOptions.serverUrl,this.siteIdentifier="",this.dashboardServerApiUrl=this.rootUrl+"/api"),this.scheduleEndpointUrl=this.baseUrl+"/datasources/recurrence-type-page",!0})),this._addJquerydependentFiles=this.Invoke((function(){if(this._checkDepedentFileExists(this.jQueryDepedentFile,!1)||null!=window.jQuery&&"1.10.2"==window.jQuery().jquery){const e=setInterval((()=>{window.jQuery&&(clearInterval(e),i=window.bbEmbed=window.$,void 0!==window.bb$&&(i=window.bbEmbed=window.bb$),this._addWrapperDependentFiles(this,this.wrapperDependentScriptFiles),this._loadDepedentFiles())}),1e3)}else{const e=document.createElement("script");this.embedOptions.environment==s.Environment.Enterprise?e.setAttribute("src",this.rootUrl+"/cdn/scripts/designer/"+this.jQueryDepedentFile):e.setAttribute("src",this.cdnLink+"/scripts/designer/"+this.jQueryDepedentFile),document.head.appendChild(e),e.onload=()=>{try{const e=document.createElement("script");e.append(this.jqConflictFile),document.head.appendChild(e),i=window.bbEmbed=window.bb$,this._addWrapperDependentFiles(this,this.wrapperDependentScriptFiles),this._loadDepedentFiles()}catch(e){this._throwError("server Not Found"),this.invalidDetail=!0}}}})),this._renderDashboard=this.Invoke((function(e){const t=this;if(!e.Status)throw"The page you are looking for was unavailable."==e.errorMessage&&(e.Status=!1,e.Message=e.errorMessage),new Error(e.Message);{const n=e.Data;if(""!=this.embedOptions.pinboardName&&0==this.pinboardIds.length)this._renderPinboard(n);else if(n.length)this._renderMultiTabDashboard(n);else{let o;n.ItemDetail=this.embedOptions.mode!=s.Mode.Connection?JSON.parse(e.Data.ItemDetail):null,this.embedOptions.mode==s.Mode.View&&(this.dashboardUrl="/dashboard/"+n.ItemDetail.Id+"/"+n.ItemDetail.CategoryName+"/"+n.ItemDetail.Name+"?"),this.accessToken=n.access_token;let a="";this.pinboardIds.length>0?i.map(this.pinboardIds,(function(e){if(e.widgetId==n.WidgetId){const i=t._getDashboardInstance(e.pinboardContainerId+"_embeddedbi");t._isNullOrUndefined(i)&&(o=e.pinboardContainerId)}})):this.isMultiTab?(o="multi_"+n.ItemDetail.Id.toString().replaceAll("-",""),t._isNullOrUndefined(t.embedOptions.dashboardSettings.dashboardName)||"string"==typeof t.embedOptions.dashboardSettings.dashboardName||i.map(t.embedOptions.dashboardSettings.dashboardName,(function(e){n.ItemDetail.Id==e.dashboardId&&(a=e.dashboardName)}))):(o=this.embedOptions.embedContainerId,t._isNullOrUndefined(t.embedOptions.dashboardSettings.dashboardName)||"string"!=typeof t.embedOptions.dashboardSettings.dashboardName||(a=t.embedOptions.dashboardSettings.dashboardName));const d=this.pinboardIds.length>0?i("#"+o).height():this.isMultiTab?this.embedOptions.height.indexOf("%")>0?this.embedOptions.height.includes("calc")?"calc(100% - 36px)":"calc("+this.embedOptions.height+" - 36px)":parseInt(this.embedOptions.height,10)-36+"px":this.embedOptions.height;let r;if(void 0!==e.Data.UserDetail&&(n.UserDetail=JSON.parse(e.Data.UserDetail)),this.embedOptions.mode==s.Mode.Connection&&i('<style type="text/css"> .e-dashboarddesigner .bbi-dbrd-connection-mode-dlg .bbi-dbrd-connection-mode-header .bbi-dbrd-icon-container .bbi-dbrd-close-icon{ display: none !important} </style>').appendTo("head"),this._onBoldBIAuthorizionComplete(n),""==this.embedOptions.widgetList&&(document.getElementById(o).style.height=d,document.getElementById(o).style.width=""!=this.embedOptions.pinboardName?document.getElementById(o).style.width:this.isMultiTab?"100%":this.embedOptions.width),r={siteUrl:this.baseUrl,serviceUrl:this.designerRootUrl,dataServiceUrl:this.designerRootUrl,serverUrl:this.dashboardServerApiUrl,viewerSettings:{serviceUrl:this.designerRootUrl+"/v1.0/design"},localeSettings:{culture:this.embedOptions.localeSettings.culture,dateFormat:this._isEmptyOrSpaces(this.embedOptions.localeSettings.dateFormat)?"M/d/yyyy":this.embedOptions.localeSettings.dateFormat,timeFormat:this._isEmptyOrSpaces(this.embedOptions.localeSettings.timeFormat)?"h:mm:ss tt":this.embedOptions.localeSettings.timeFormat},mode:this.embedOptions.mode,environment:this.embedOptions.environment,IsEmbed:!0,_isPublic:this.embedOptions.mode!=s.Mode.Connection?n.ItemDetail.IsPublic:"",itemId:this.embedOptions.mode!=s.Mode.Connection?n.ItemDetail.Id:"",dashboardPath:this.embedOptions.mode==s.Mode.DataSource||this.embedOptions.mode==s.Mode.Connection?"":n.ItemDetail.ItemLocation,serviceAuthorizationToken:n.access_token,dashboardName:this.embedOptions.mode==s.Mode.DataSource||this.embedOptions.mode==s.Mode.Connection?"":this._isEmptyOrSpaces(a)?n.ItemDetail.Name:a,dashboardDescription:this.embedOptions.mode==s.Mode.DataSource||this.embedOptions.mode==s.Mode.Connection?"":n.ItemDetail.Description,theme:this._isEmptyOrSpaces(this.multiTabTheme)?this.embedOptions.theme:this.multiTabTheme,enableTheme:void 0!==this.embedOptions.dashboardSettings.enableTheme&&this.embedOptions.dashboardSettings.enableTheme,enableFilterOverview:this.embedOptions.dashboardSettings.enableFilterOverview,isPinWidget:this.pinboardIds.length>0,export:{Image:this.embedOptions.exportSettings.showImage,Excel:this.embedOptions.exportSettings.showExcel,Pdf:this.embedOptions.exportSettings.showPDF},filterParameters:(this._isEmptyOrSpaces(this.embedOptions.filterParameters)?"":"&")+(this.isMultiTab&&window.multiTabFilterParameter?window.multiTabFilterParameter:this.embedOptions.filterParameters),designCanvasSettings:this.embedOptions.designCanvasSettings,widgetContainerSettings:this.embedOptions.widgetContainerSettings,viewDataSettings:{checkShowAllColumns:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.viewDataSettings)&&this.embedOptions.dashboardSettings.viewDataSettings.showAllColumns},dashboardThemeSettings:{appearance:this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings)||this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings.appearance)?"light":this.embedOptions.dashboardSettings.themeSettings.appearance,applicationTheme:this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings)||this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings.application)?null:this.embedOptions.dashboardSettings.themeSettings.application,dashboardTheme:this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings)?null:this._isNullOrUndefined(this.embedOptions.dashboardSettings.themeSettings.dashboard)?this.embedOptions.dashboardSettings.themeSettings.isLocalTheme?"boldBITheme":null:this.embedOptions.dashboardSettings.themeSettings.dashboard},filterOverviewSettings:{showSaveIcon:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.filterOverviewSettings)&&this.embedOptions.dashboardSettings.filterOverviewSettings.showSaveIcon,showSaveAsIcon:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.filterOverviewSettings)&&this.embedOptions.dashboardSettings.filterOverviewSettings.showSaveAsIcon,showViewSavedFilterIcon:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.filterOverviewSettings)&&this.embedOptions.dashboardSettings.filterOverviewSettings.showViewSavedFilterIcon,viewId:this._isNullOrUndefined(this.embedOptions.dashboardSettings.filterOverviewSettings)||this._isEmptyOrSpaces(this.embedOptions.dashboardSettings.filterOverviewSettings.viewId)?null:this.embedOptions.dashboardSettings.filterOverviewSettings.viewId,viewName:this._isNullOrUndefined(this.embedOptions.dashboardSettings.filterOverviewSettings)||this._isEmptyOrSpaces(this.embedOptions.dashboardSettings.filterOverviewSettings.viewName)?null:this.embedOptions.dashboardSettings.filterOverviewSettings.viewName},widgets:this._getWidgetFilterInfo(),actionComplete:function(e){t._onBoldBIDashboardInstaceActionComplete(e)},beforeBannerIconRender:function(e){t._onBoldBIDashboardBeforeBannerIconRender(e)},beforeOtherOptionContextMenuRender:function(e){t._onBoldBIDashboardBeforeOtherOptionContextMenuRender(e)},_onSaveFilter:function(e){t._onBoldBIDashboardSaveFilter(e)},_onSaveAsFilter:function(e){t._onBoldBIDashboardSaveAsFilter(e)},_onViewSavedFilters:function(e){t._onBoldBIDashboardOpenViewSection(e)},onBannerIconClick:function(e){t._onBoldBIDashboardBannerIconClick(e)},beforeWidgetIconRendered:function(e){t._onBoldBIDashboardBeforeWidgetIconRendered(e)},onWidgetIconClick:function(e){t._onBoldBIDashboardWidgetIconClick(e)},_onFavoriteStateChange:function(e){t._onBoldBIDashboardUpdatefavorite(e)},onExportRender:function(e){t._onBoldBIWidgetExportRender(e)},beforeNavigateUrlLinking:function(e){t._onBoldBIBeforeNavigateUrlLinking(e)},beforeControlMenuOpen:function(e){t._onBoldBIBeforeControlMenuOpen(e)},beforeDashboardMobileMenuOpen:function(e){t._onBoldBIBeforeDashboardMobileMenuOpen(e)},ajaxBeforeLoad:function(e){t._onBoldBIAjaxBeforeLoad(e)},beforeDesignerToolbarButtonsRendered:function(e){t._onBoldBIbeforeDesignerToolbarButtonsRendered(e)},onControlMenuClick:function(e){t._onBoldBIonControlMenuClick(e)},beforeDatasourceToolbarButtonsRendered:function(e){t._onBoldBIbeforeDatasourceToolbarButtonsRendered(e)},beforeDatasourceToolbarIconsRendered:function(e){t._onBoldBIbeforeDatasourceToolbarIconsRendered(e)},beforeDesignerToolbarIconsRendered:function(e){t._onBoldBIbeforeDesignerToolbarIconsRendered(e)},toolbarClick:function(e){t._onBoldBItoolbarClick(e)},beforeWidgetItemsListed:function(e){t._onBoldBIbeforeWidgetItemsListed(e)}},""==this.embedOptions.widgetList&&(r.actionBegin=function(e){t._onBoldBIDashboardInstaceActionBegin(e,o)}),this.embedOptions.mode==s.Mode.Design){n.ItemDetail.IsDraft&&(r.dashboardPath="");const e=this._isEmptyOrSpaces(n.DatasourceId)?"":n.DatasourceId;this._isEmptyOrSpaces(e)||(r.datasource=e),this.embedOptions.datasources.length>0&&(r.datasources=this.embedOptions.datasources),r.disableAutoRecover=this.embedOptions.disableAutoRecover,r.schedule={endPoint:this.scheduleEndpointUrl,summaryText:""},r.serverSettings={isAdmin:void 0!==n.IsAdmin&&n.IsAdmin},r.intermediateDbStatus=n.IntermediateDbStatus,r.connectionList=n.ConnectionList,r.isAllowUserToCreateDatasource=n.CanCreateDatasource,r.enablePublicDashboardSetting=!1,r.beforeNavigateToDashboard=function(e){t._onBoldBIBeforeNavigateToDashboard(e)},r.toolbarSettings={showToolbar:this.embedOptions.toolbarSettings.showToolbar},r.predefinedWidgets=this.embedOptions.preConfiguredWidgets,this.embedOptions.environment==s.Environment.Enterprise?r.configuration=this.rootUrl+"/webdesignerservice/scripts/settings/"+n.Branding+"/settings.min.js":r.configuration=this.cdnLink+"/scripts/settings/"+n.Branding+"/settings.min.js",r.designerSettings={widgetsPanel:{hideExistingWidgets:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)&&this.embedOptions.dashboardSettings.widgetsPanel.hideExistingWidgets,hideDefaultWidgets:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)&&this.embedOptions.dashboardSettings.widgetsPanel.hideDefaultWidgets,defaultPanelDisplayText:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)?"":this.embedOptions.dashboardSettings.widgetsPanel.defaultPanelDisplayText,existingPanelDisplayText:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)?"":this.embedOptions.dashboardSettings.widgetsPanel.existingPanelDisplayText,defaultPanelSearchPlaceholder:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)?"":this.embedOptions.dashboardSettings.widgetsPanel.defaultPanelSearchPlaceholder,existingPanelSearchPlaceholder:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)?"":this.embedOptions.dashboardSettings.widgetsPanel.existingPanelSearchPlaceholder,existingDashboards:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)?[]:this.embedOptions.dashboardSettings.widgetsPanel.existingDashboards,dragAndDropSettings:{rowSpan:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)||this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings)?null:this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings.rowSpan,columnSpan:this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)||this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings)?null:this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings.columnSpan,isWidgetMode:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel)&&!this._isNullOrUndefined(this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings)&&this.embedOptions.dashboardSettings.widgetsPanel.dragAndDropSettings.isWidgetMode}},dataSourceConfig:{hideDataSourceConfig:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.dataSourceConfig)&&this.embedOptions.dashboardSettings.dataSourceConfig.hideDataSourceConfig}},r.userSettings={hidePreviewAs:!this._isNullOrUndefined(this.embedOptions.dashboardSettings.showPreviewAs)&&!this.embedOptions.dashboardSettings.showPreviewAs}}if(this.embedOptions.mode==s.Mode.Connection&&(r.connectionList=n.ConnectionList),this.embedOptions.mode==s.Mode.DataSource&&(r.datasourceName=n.ItemDetail.Name,r.datasource=n.ItemDetail.Id),this.isMultipleWidgetMode=""!=this.embedOptions.widgetList&&this.isMultipleWidgetMode,this.isWidgetMode&&(r.isPinWidget=this.isWidgetMode,r.widgetId=n.WidgetId),0==this.embedOptions.dashboardSettings.showHeader?r.isHideHeader=!0:r.isHideHeader=!1,this.isMultiTab&&(r.dashboardSettings={parentId:this.parentDbrdId,isMultiTab:!0}),this.embedOptions.dynamicConnection.isEnabled&&(r.customIdentity=this.embedOptions.dynamicConnection.identity),this.embedOptions.autoRefreshSettings.enabled&&(r.enableAutoRefresh=!0,r.autoRefreshSettings={intervalSettings:{mode:"Hourly",hourlySchedule:{hours:this.embedOptions.autoRefreshSettings.hourlySchedule.hours,minutes:this.embedOptions.autoRefreshSettings.hourlySchedule.minutes,seconds:this.embedOptions.autoRefreshSettings.hourlySchedule.seconds}}}),!(window.bbEmbed instanceof Function))throw new Error("bbEmbed is not defined");if(0==this.isMultipleWidgetMode){let e,i=window.bbEmbed.call(t,"#"+(t.pinboardIds.length>0?o+"_embeddedbi":t.childContainer.id));if(0===i.length&&(i=window.bbEmbed.call(t,"#"+o+"_embeddedbi"),e=o+"_embeddedbi"),window.BoldBIDashboardDesigner instanceof Function){const n=this._getDashboardInstance(e);null!=n?(n.model=Object.assign(n.model,r),n.redrawDashboard()):window.BoldBIDashboardDesigner.call(t,i,r)}else this._throwError("BoldBIDashboardDesigner is not defined")}else{const o=this;i.ajax({type:"POST",url:r.serviceUrl+"/v1.0/dashboard/preloaddashboard/"+n.ItemDetail.ItemLocation,beforeSend:function(t){t.setRequestHeader("Authorization","bearer "+e.Data.access_token),t.setRequestHeader("Caller",r.serverUrl)},success:function(i){if(i.ApiStatus){r.isPreLoaded=!0;const i=JSON.parse(e.Data.WidgetList);o.embedOptions.widgetList.forEach(function(e){const n=new s;r.widgetId=i[e.widgetName.toLowerCase()];const a=e.containerId;r.actionBegin=function(e){t._onBoldBIDashboardInstaceActionBegin(e,a)},document.getElementById(a).style.height=d,document.getElementById(a).style.width=this.isMultiTab?"100%":this.embedOptions.width;const l=window.bbEmbed.call(t,"#"+a+"_embeddedbi"),h=a+"_embeddedbi";n.childContainer=l[0],n.childContainer.id=a+"_embeddedbi",n.embedOptions=o.embedOptions,n._initializeUrls(),n.isMultipleWidgetMode=!0,n.isWidgetMode=!0;const m=document.getElementById(a);s._hasinstance(m,"embeddedBoldBI")&&s._removeinstance(m,"embeddedBoldBI");const c=Object.assign(n);if(s._putinstance(m,"embeddedBoldBI",c),window.BoldBIDashboardDesigner instanceof Function){const e=t._getDashboardInstance(h);null!=e?(e.model=Object.assign(e.model,r),e.redrawDashboard()):window.BoldBIDashboardDesigner.call(t,l,r)}else this._throwError("BoldBIDashboardDesigner is not defined");this._removeElementsClass(a,".preloader-wrap","viewer-blue-loader")}.bind(o))}},error:function(){t._throwError("Error while downloading the dashboards"+this.embedOptions.dashboardId)}})}""==this.embedOptions.widgetList&&this._removeElementsClass(o,".preloader-wrap","viewer-blue-loader")}}})),this._changeLayoutSuccess=this.Invoke((function(e){if(e.Status&&""!=this.homepageItemId&&this.isVirtualHomepage)this.afterVirtualHomepageSave(this.homepageItemId);else if(!e.Status)throw new Error("Change layout failure due to"+e.Message)})),this._createPinboardDom=this.Invoke((function(e){const t=this;if(!e.ColumnInfo)throw new Error("Pinboard Details not found");if(i("#widget-container").attr("data-homepage-id",e.Id).attr("data-current-layout",e.ColumnInfo.Layout).attr("data-item-type",e.ItemType).attr("data-virtual-homepage",e.IsVirtualHomepage),"widget"==e.ItemType.toLowerCase()){const n=e.ColumnInfo.Column;i.each(n,(function(e){i("#widget-container").append("<ul id=column-"+(e+1)+' class="widget-list" data-column-id='+(e+1)+"></ul>"),n[`${e}`].Item.length>0?i.each(n[`${e}`].Item,(function(s){const o=null==n[`${e}`].Item[`${s}`].Id?"/bi/"+t.siteIdentifier+"/widgets/widgets":"/bi/"+t.siteIdentifier+"/dashboards",a=n[`${e}`].Item[`${s}`].Name,d=n[`${e}`].Item[`${s}`].WidgetType;let r=0;r=null!=d&&(d.includes("Card")||d.includes("Image"))?250:400;const l=null!=n[`${e}`].Item[`${s}`].QueryString?n[`${e}`].Item[`${s}`].QueryString:"",h=null==n[`${e}`].Item[`${s}`].TabId?o+"/"+n[`${e}`].Item[`${s}`].ItemId+"/"+(null!=n[`${e}`].Item[`${s}`].Id?n[`${e}`].Item[`${s}`].CategoryName+"/":"")+n[`${e}`].Item[`${s}`].ItemName+(""!=l?"?"+l:l):o+"/"+n[`${e}`].Item[`${s}`].ItemId+"/"+(null!=n[`${e}`].Item[`${s}`].Id?n[`${e}`].Item[`${s}`].CategoryName+"/":"")+n[`${e}`].Item[`${s}`].ItemName+"?tab="+n[`${e}`].Item[`${s}`].TabId+(""!=l?"&"+l:l),m=0!=s?'style="width:100%;height:100%;"':"";if(".sydj"!=n[`${e}`].Item[`${s}`].ItemExtension.toLowerCase())i("#column-"+(e+1)).append('<li class="list-item" '+m+'><div class="widget" id=widget_'+(e+1)+"_"+(s+1)+' data-dashboardurl="'+h+'" style="height:100%;width:100%;"></div></li>');else{const n=t.embedOptions.pinboardSettings.enableUnpinWidget||void 0===t.embedOptions.pinboardSettings.enableUnpinWidget?'<div id="widget-icons"><i class="items unpin-widget su su-delete" data-toggle="tooltip" data-original-title="Unpin Widget"  style="color: black;" /></div>':"";i("#column-"+(e+1)).append('<li class="list-item" '+m+'><div class="widget" id=widget_'+(e+1)+"_"+(s+1)+' data-dashboardurl="'+h+'" style="height: '+r+'px;width:100%;background:#fff;"><div class="widget-sortable" style="width:100%;float:left;display:block;height:0px"><div style="height:100%;width:100%;cursor:move;"><div id="item-name">'+a+"</div>"+n+"</div></div></div></li>")}})):i("#column-"+(e+1)).append('<li class="empty click-container"><div class="empty-content empty-homepage"><span class="drag-widget">Drag your widgets here to customize layout</span></div></li>')}));const s=i("li.list-item a");for(let e=0;e<s.length;e++)i("li.list-item a").eq(e).attr("href",i("li.list-item a").eq(e).attr("data-url"))}else"dashboard"==e.ItemType.toLowerCase()&&(i("#add-item, #layout-container, #divider").hide(),i("#widget-container").append('<ul id="column-1" class="dashboard-column col-lg-12 col-md-12 col-sm-12 col-xs-12" data-column-id="1"><li class="dashboard-list"><div class="dashboard" id="dashboard_1_1" style="height:100%;width:100%"></div></li></ul>'))})),this._dragAndDropSuccess=this.Invoke((function(e){if(!e.Status)throw new Error("Drag and drop failure due to"+e.Message)})),this._renderMultiTabDashboard=this.Invoke((function(e){if(this.embedOptions.mode!=s.Mode.View||this.isWidgetMode){if(this.isWidgetMode){const e=document.getElementById(this.embedOptions.embedContainerId);throw s._hasinstance(e,"embeddedBoldBI")&&s._removeinstance(e,"embeddedBoldBI"),new Error("Cant able to render the widget mode in Multitab dashboard")}{const e=document.getElementById(this.embedOptions.embedContainerId);throw s._hasinstance(e,"embeddedBoldBI")&&s._removeinstance(e,"embeddedBoldBI"),new Error("Cant able to render the Multitab dashboard in design mode")}}{this.isMultiTab=!0;const t=this,s=i("#"+t.embedOptions.embedContainerId);s.html("");const o=t.embedOptions.embedContainerId+"_multi_tab_dashboard",a=i('<div id="'+o+'" class="multitab-dbrd" style="height: 100% !important"></div>');s.append(a);const d=i('<div class="e-tab-header"></div>'),r=i('<div class="e-content"></div>');i.map(e,(function(e){const n=JSON.parse(e.ItemDetail);t.parentDbrdId=e.parentId;const s=n.Id.replaceAll("-","");t.dashboardDetails[`${s}`]=e,t._isNullOrUndefined(t.embedOptions.dashboardSettings.dashboardName)||"string"==typeof t.embedOptions.dashboardSettings.dashboardName||i.map(t.embedOptions.dashboardSettings.dashboardName,(function(e){n.Name=s==e.dashboardId.replaceAll("-","")?t._isEmptyOrSpaces(e.dashboardName)?n.Name:e.dashboardName:n.Name})),d.append(i("<div>"+n.Name+"</div>"));const o=i('<div style="height:100%;width:100%;overflow: hidden !important;" id="multi_'+s+'"></div>');r.append(i("<div></div>").append(o.append('<div id="multi_'+s+'_embeddedbi" class="bbembed-multitab-dbrd"></div>')))})),a.append(d).append(r),n=new ejdashboard.navigations.Tab({enableAnimation:!1,selected:i.proxy(this._tabSelected,this)}),n.appendTo("#"+o),i(".e-tab-header .e-toolbar-item .e-tab-text").css({display:"inline-block",width:"150px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis",color:"#000","text-transform":"none"}),i('<style type="text/css"> .embed-multi-tab-indicator{ background: var(--primary-branding-color) !important; border-radius: 4px; display: block !important; height: 5px !important;}</style>').appendTo("head"),i(".e-control.e-tab .e-tab-header .e-indicator").addClass("embed-multi-tab-indicator"),i.map(i(".e-tab-header .e-toolbar-item .e-tab-text"),(function(e,t){i(e).attr("title",i(e).text()),i(i(".e-content").find("#e-content-multi_tab_dashboard_"+t).children()).css({height:"100%",width:"100%",overflow:"hidden",display:"block",position:"absolute",left:i(".e-content.e-lib.e-touch").width()*t})})),i(".multitab-dbrd .e-content").attr("style","height: 100% !important"),i.map(i(".multitab-dbrd .e-content").children(),(function(e){i(e).css({height:"100%"})})),i(s).css({"overflow-x":"hidden","overflow-y":"hidden",width:t.embedOptions.width}),i("#"+o).css({width:i(".e-content.e-lib.e-touch").width(),height:this.embedOptions.height}),i(".e-tab-header")[0].ej2_instances[0].refreshOverflow(),n.resizeContext(),i.map(e,(function(e,i){if(0==i){const i={Apistatus:!0,Data:e,Status:!0};t._renderDashboard(i)}}))}})),this._validateOptions=this.Invoke((function(e){if(this.embedOptions.embedContainer=e.embedContainerId,this._isNullOrUndefined(e.onError)||(this.embedOptions.onError=e.onError),this._isEmptyOrSpaces(e.embedContainerId))throw this.invalidDetail=!0,new Error("Please provide the valid Embed container Id");if(this._isEmptyOrSpaces(e.serverUrl))throw this.invalidDetail=!0,new Error("Server URL cannot be empty");if(!this._isUrl(e.serverUrl))throw this.invalidDetail=!0,new Error("Please provide a valid Server URL");if(e.environment!=s.Environment.Enterprise&&e.environment!=s.Environment.Cloud)throw this.invalidDetail=!0,new Error(e.environment+=" is not valid environment. Please provide valid environment value.");if(!this._isEmptyOrSpaces(e.pinboardName))return!0;if(e.mode==s.Mode.Connection)return!0;if(this._isEmptyOrSpaces(e.dashboardId)&&this._isEmptyOrSpaces(e.dashboardPath)&&e.mode!=s.Mode.Design&&this._isEmptyOrSpaces(e.datasourceId)&&this._isEmptyOrSpaces(e.datasourceName))throw e.mode!=s.Mode.DataSource?this._isEmptyOrSpaces(e.pinboardName)&&!this._isNullOrUndefined(e.pinboardName)?(this.invalidDetail=!0,new Error("Pinboard name cannot be empty")):(this.invalidDetail=!0,new Error("Dashboard id or path cannot be empty")):(this.invalidDetail=!0,new Error("Datasource id or name cannot be empty"));return!0})),this.IsDependencyLoaded=!1,this.rootUrl="",this.baseUrl="",this.siteIdentifier="",this.dashboardServerApiUrl="",this.designerRootUrl="",this.customThemeUrl="",this.scheduleEndpointUrl="",this.childContainer="",this.cdnLink="",this.onSaveFilterFn="saveFilter",this.onSaveAsFilterFn="saveAsFilter",this.onViewSavedFiltersFn="openViewSection",this.onBannerIconClickFn="onBannerIconClick",this.beforeWidgetIconRenderedFn="beforeWidgetIconRendered",this.onWidgetIconClickFn="onWidgetIconClick",this.actionBeginFn="onActionBeginOfNewDashboardViewer",this.actionCompleteFn="onActionCompleteOfNewDashboardViewer",this.beforeBannerIconRenderFn="beforeBannerIconRender",this.beforeOtherRenderFn="beforeOtherOptionContextMenuRender",this.isWidgetMode=!1,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="",this.errorImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjExNzgwNzk4MzhBOTExRTQ4MDMxRTZEMkIzQUQzNjdCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjExNzgwNzk5MzhBOTExRTQ4MDMxRTZEMkIzQUQzNjdCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTE3ODA3OTYzOEE5MTFFNDgwMzFFNkQyQjNBRDM2N0IiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTE3ODA3OTczOEE5MTFFNDgwMzFFNkQyQjNBRDM2N0IiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4RB5yjAAABXklEQVR42rRUsU7DQAzNRWxESMydK2XsAhtiQGHo1LmsZYCBMSNDx3wASJQ1zN0rJjZYOlbqDCsSPxCeq5f0anwtSMHSk52L/c4++85VVRW1KXu14ZwLOn2enK1+Hr48B3evE3ONoQhBcgw1AjKgw+V3YAY8gvz1V4QgOoC6B4b0nQML2inQo/0EXIH4K0hIMslAspsCOQKWKvMuVAEMAMkyE9KmF2LUH3AugQoYK5IbgVob07f0eWJ1ZlLmFDveqjM/JRqhj1QxZOxKYs9nRJ0bTdwHEmM9V7EbhNLNuT4zSkLSSGW5ZNMyi7DjddMiTAL/Ft5YrQd7h3z8+aZwaFPLCaX1t3CkjP1Rssxfj3Omb825wFjvctBnFuGEujCyeCC0FCp2TYiy3qBkSAd6sCF9YmOweVtKxv7P1Qs9DnfAxY7HQaq53vo4qEyOoC4Dz9fEL9MkbEviqGX5FmAA1Vq0VgBUvekAAAAASUVORK5CYII=",this.pinBoardRendered=!0,this.pinboardIds=[],this.fromColumn=null,this.toColumn=null,this.fromPosition=null,this.toPosition=null,this.column=null,this.position=null,this.isMultiTab=!1,this.parentDbrdId="",this.isNewConnection=!1,this.multiTabTheme="",this.dashboardDetails={},this.pinboardDetails=[],this.accessToken="",this.homepageItemId="",this.isVirtualHomepage=!1,this.dashboardUrl="",this.commentsArgs={},this._widgetsCollection=[],this.jQueryDepedentFile="jquery-1.10.2.min.js",this.jqConflictFile="window.bb$ = jQuery.noConflict();",this.isFullscreen=!1,this.embedAuthorizeEndPoint="/embed/authorize",this.embedGetDetailsEndPoint="/embed/get-details",this.isMultipleWidgetMode=!1,this.invalidDetail=!1,this.wrapperDependentScriptFiles=["jquery.easing.1.3.min.js","jquery-ui.min.js","jsrender.min.js"],this.viewerScriptFiles=["ej1.web.all.min.js","ej2.web.all.min.js","designerlocalization.js"],this.pinBoardScriptFiles=["bootstrap.min.js"],this.pinboardCssFiles=["pinboard-embed.min.css"],this.ejViewerDependentFiles=["ej.dashboarddesigner.min.js"],this.ejDesignerDependentFiles=["codemirror.min.js"],this.designerScriptFiles=["ej1.web.all.min.js","ej2.web.all.min.js","designerlocalization.js","signalr.min.js"],this.cssFiles=["font-server.min.css","ej1.web.all.min.css","ej2.partone.web.all.min.css","ej2.parttwo.web.all.min.css","ej.designerwidgets.all.min.css","ej.dashboarddesigner.min.css"],this.designerCssFiles=["ej.codemirror.min.css"],this.applicationThemeCssFiles=["boldbi.theme.definition.min.css","application.theme.css"],this.dashboardThemeCssFiles=["dashboard.theme.css"],this.embedOptions={serverUrl:"",dashboardId:"",dashboardPath:"",datasourceId:"",datasourceName:"",embedContainerId:"",embedType:s.EmbedType.Component,environment:s.Environment.Enterprise,mode:s.Mode.View,dashboardSettings:{showHeader:!0,showExport:!0,showRefresh:!0,showMoreOption:!0,onFavoriteIconClick:"",beforeIconRender:"",onIconClick:"",onInteraction:"",enableTheme:!1,enableFilterOverview:!0,enableFullScreen:!1,showDashboardParameter:!0,dashboardName:"",beforePublishAs:"",beforeDesignerToolbarButtons:"",enableComment:!1,beforeDesignerToolbarIconsRendered:"",beforeDatasourceToolbarButtonsRendered:"",beforeDatasourceToolbarIconsRendered:"",toolbarClick:"",widgetsPanel:{hideDefaultWidgets:!1,hideExistingWidgets:!1,defaultPanelDisplayText:"",existingPanelDisplayText:"",defaultPanelSearchPlaceholder:"",existingPanelSearchPlaceholder:"",existingDashboards:[],dragAndDropSettings:{rowSpan:null,columnSpan:null,isWidgetMode:!1}},dataSourceConfig:{hideDataSourceConfig:!1},viewDataSettings:{showAllColumns:!1},showPreviewAs:!0,themeSettings:{appearance:"",application:"",dashboard:"",isLocalTheme:!1},filterOverviewSettings:{showSaveAsIcon:!1,showSaveIcon:!1,showViewSavedFilterIcon:!1,viewId:"",viewName:""},onSaveFilter:"",onSaveAsFilter:"",onViewSavedFilters:""},widgetSettings:{showExport:!0,showMaximize:!0,showMoreOption:!0,showFilter:!0,beforeIconRender:"",onIconClick:"",beforeWidgetControlMenuOpen:"",onWidgetControlMenuClick:"",enableComment:!1,beforeWidgetItemsListed:""},filterParameters:"",dynamicConnection:{isEnabled:!1,identity:""},exportSettings:{showExcel:!0,showPDF:!0,showImage:!0,showCSV:!0},height:"768px",width:"1024px",theme:"",authorizationServer:{url:"",data:"",headers:{},authorizionComplete:""},expirationTime:86400,autoRefreshSettings:{enabled:!1,hourlySchedule:{hours:0,minutes:0,seconds:0}},isRemoveStyle:!1,scalingFactor:1,localeSettings:{culture:"en-US",dateFormat:"M/d/yyyy",timeFormat:"h:mm:ss tt",appLocale:"en-US"},actionBegin:"",actionComplete:"",beforeContextMenuRender:"",beforeNavigateUrlLinking:"",beforeNavigateToDashboard:"",beforeFilterApply:"",afterFilterApply:"",toolbarSettings:{showToolbar:!0},pinboardName:"",pinboardSettings:{enablePinboardHeader:!0,enableUnpinWidget:!0},onUnpin:"",onDrag:"",onDrop:"",onLayoutChange:"",onResize:"",datasources:[],designCanvasSettings:{margin:null},widgetContainerSettings:{margin:null,boxShadow:null},beforeDatasourceSave:"",afterDatasourceSave:"",preConfiguredWidgets:{dashboardId:"",categoryName:""},disableAutoRecover:!1,ajaxBeforeLoad:"",isBingMapRequired:!1,widgetList:""},this.loadDashboard=this.Invoke((function(e){if(!this.invalidDetail){if(this.embedOptions.mode!=s.Mode.View)throw new Error("Invalid embeded Mode");if(""!=this.embedOptions.pinboardName&&(this.embedOptions.pinboardName=""),null!=e&&(this.embedOptions.dashboardId=e),this.embedOptions.embedType==s.EmbedType.Component)this.isWidgetMode=!1,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="",this._showLoader(),this._isDependencyLoaded(this);else if(this.embedOptions.embedType==s.EmbedType.IFrame){const e=document.createElement("iframe");e.frameBorder=0,e.width=this.embedOptions.width,e.height=this.embedOptions.height,e.id=this.embedOptions.embedContainerId+"_"+this.embedOptions.dashboardId,e.allowfullscreen=this.embedOptions.dashboardSettings.showFullScreen,e.setAttribute("src",this.embedOptions.serverUrl+"/dashboards/"+this.embedOptions.dashboardId+"?isembed=true"),document.getElementById(this.embedOptions.embedContainerId).appendChild(e)}}})),this.loadDashboardWidget=this.Invoke((function(e,t){if(!this.invalidDetail){if(this._isEmptyOrSpaces(e))throw new Error("Widget name should not be empty");if(this.embedOptions.mode!=s.Mode.View)throw new Error("Cant able to render the Widget in design mode");if(""!=this.embedOptions.pinboardName&&this.pinBoardRendered&&(this.embedOptions.pinboardName=""),this.embedOptions.embedType==s.EmbedType.Component)this.isWidgetMode=!0,this.widgetName=e,this.isDashboardViewMode=!1,this.dashboardViewName="",this._showLoader(),this._isDependencyLoaded(this,t);else if(this.embedOptions.embedType==s.EmbedType.IFrame){const e=document.createElement("iframe");e.frameBorder=0,e.width=this.embedOptions.width,e.height=this.embedOptions.height,e.id=this.embedOptions.embedContainerId+"_"+this.embedOptions.dashboardId,e.allowfullscreen=this.embedOptions.dashboardSettings.showFullScreen,e.setAttribute("src",this.embedOptions.serverUrl+"/dashboards/"+this.embedOptions.dashboardId+"?isembed=true"),document.getElementById(this.embedOptions.embedContainerId).appendChild(e)}}})),this.loadMultipleWidgets=this.Invoke((function(e){if(!this.invalidDetail){if(this.embedOptions.mode!=s.Mode.View)throw new Error("Invalid embed mode");if(""!=this.embedOptions.pinboardName&&(this.embedOptions.pinboardName=""),null!=e&&(this.embedOptions.dashboardId=e),this.embedOptions.embedType==s.EmbedType.Component){this.isWidgetMode=!0,this.isMultipleWidgetMode=!0,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="";const t=this,n=this.embedOptions.widgetList,s=setInterval((()=>{window.jQuery&&(clearInterval(s),n.forEach(function(e){const n=e.containerId;let s=window.bbEmbed.call(t,"#"+n+"_embeddedbi");0===s.length&&(this.childContainer=document.createElement("div"),this.childContainer.id=n+"_embeddedbi",i("#"+n).css({width:i(".e-content.e-lib.e-touch").width(),height:this.embedOptions.height}),document.getElementById(n).append(this.childContainer),s=window.bbEmbed.call(t,"#"+n+"_embeddedbi")),this._showLoader(n)}.bind(this)),this._isDependencyLoaded(this,e))}),1e3)}}})),this.loadDesigner=this.Invoke((function(e){if(!this.invalidDetail){if(this.embedOptions.mode!=s.Mode.Design)throw new Error("Invalid embed Mode");if(""!=this.embedOptions.pinboardName&&(this.embedOptions.pinboardName=""),null!=e&&(this.embedOptions.dashboardId=e),this.embedOptions.embedType==s.EmbedType.Component)this.isWidgetMode=!1,this.widgetName="",this.isDashboardViewMode=!1,this.dashboardViewName="",this._showLoader(),this._isDependencyLoaded(this);else if(this.embedOptions.embedType==s.EmbedType.IFrame){const e=document.createElement("iframe");e.frameBorder=0,e.width=this.embedOptions.width,e.height=this.embedOptions.height,e.id=this.embedOptions.embedContainerId+"_"+this.embedOptions.dashboardId,e.allowfullscreen=this.embedOptions.dashboardSettings.showFullScreen,e.setAttribute("src",this.embedOptions.serverUrl+"/dashboard-designer/"+this.embedOptions.dashboardId+"?isembed=true"),document.getElementById(this.embedOptions.embedContainerId).appendChild(e)}}})),this.refreshWidgetData=this.Invoke((function(e,t,n){if(1!=Array.isArray(e))throw new Error("Cannot able to refresh the widget the WigetName should be in array");if(this.isMultiTab){const s=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let o=0;o<s.length;o++)if(i(s[`${o}`]).attr("id").includes(n.toString().replaceAll("-",""))>0){const n=i(s[`${o}`]).attr("id"),a=this._getDashboardInstance(n);null!=a&&a.refreshWidget(e,t);break}}else{const i=this._getDashboardInstance();null!=i&&i.refreshWidget(e,t)}})),this.addWidgetToPinboard=this.Invoke((function(e,t,n){if(this._isEmptyOrSpaces(e)||this._isEmptyOrSpaces(t)||this._isEmptyOrSpaces(n))throw new Error("Please provide the valid dashboard id and widget id");{const s=i("#widget-container").attr("data-homepage-id"),o=this,a="embed_nonce="+this._uuidv4Generartor()+"&homepageId="+s+"&isPinUpdate="+!0+"&pinWidgetId="+t+"&pinDashbooardId="+e+"&pinWidgetName="+(this._isNullOrUndefined(n)?null:n)+"&pinboard_name="+this.embedOptions.pinboardName+"&embed_mode="+this.embedOptions.mode+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+this.embedOptions.expirationTime,d={embedQuerString:encodeURI(a),dashboardServerApiUrl:this.dashboardServerApiUrl};this._xhrRequestHelper("POST",this.embedOptions.authorizationServer.url,d,this.embedOptions.authorizationServer.headers,(function(e){if(e.Status)o._addWidgetInPinboard(e.Data);else if(!e.Status)throw new Error("Cant able to add the widget due to "+e.Message)}))}})),this.saveFilterView=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,s=n.exec(e.ItemId),o=!!this.isMultiTab&&n.exec(e.ChildItemId);if(this._isEmptyOrSpaces(e.ViewName)||this._isEmptyOrSpaces(e.QueryString)||!(this.isMultiTab&&o&&s||s)){if(!s)throw new Error("Please provide valid dashboard ID.");if(this.isMultiTab&&!o)throw new Error("Please provide valid child dashboard ID.");if(this._isEmptyOrSpaces(e.ViewName))throw new Error("Please provide valid view name.");if(this._isEmptyOrSpaces(e.QueryString))throw new Error("Please provide valid query string.")}else{const n=this,s={ViewName:e.ViewName,ItemId:e.ItemId,QueryString:e.QueryString,IsPublic:!1,ChildItemId:this.isMultiTab?e.ChildItemId:null};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/v4.0/dashboards/views",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(i){if(i.Status){const s={};s.ItemId=e.ItemId,s.ViewId=i.Data,s.ViewName=e.ViewName,window[`${t}`]instanceof Function?window[`${t}`].call(n,s,i.StatusMessage):t.call(n,s,i.StatusMessage)}else window[`${t}`]instanceof Function?window[`${t}`].call(n,null,i.StatusMessage):t.call(n,null,i.StatusMessage)},error:function(e){n.ajaxErrorFnc(e)}})}})),this.saveAsFilterView=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,s=n.exec(e.ItemId),o=!!this.isMultiTab&&n.exec(e.ChildItemId);if(this._isEmptyOrSpaces(e.ViewName)||this._isEmptyOrSpaces(e.QueryString)||!(this.isMultiTab&&o&&s||s)){if(!s)throw new Error("Please provide valid dashboard ID.");if(this.isMultiTab&&!o)throw new Error("Please provide valid child dashboard ID.");if(this._isEmptyOrSpaces(e.ViewName))throw new Error("Please provide valid view name.");if(this._isEmptyOrSpaces(e.QueryString))throw new Error("Please provide valid query string.")}else{const n=this,s={ViewName:e.ViewName,ItemId:e.ItemId,QueryString:e.QueryString,ChildItemId:this.isMultiTab?e.ChildItemId:null};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/v4.0/dashboards/views",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(i){if(i.Status){const s={};s.ItemId=e.ItemId,s.ViewId=i.Data,s.ViewName=e.ViewName,window[`${t}`]instanceof Function?window[`${t}`].call(n,s,i.StatusMessage):t.call(n,s,i.StatusMessage)}else window[`${t}`]instanceof Function?window[`${t}`].call(n,null,i.StatusMessage):t.call(n,null,i.StatusMessage)},error:function(e){n.ajaxErrorFnc(e)}})}})),this.updateFilterView=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,s=n.exec(e.DashboardId),o=n.exec(e.ViewId);if(s&&!this._isEmptyOrSpaces(e.QueryString)&&o){const n=this,s={ViewId:e.ViewId,DashboardId:e.DashboardId,QueryString:e.QueryString};i.ajax({async:!1,type:"PUT",url:this.dashboardServerApiUrl+"/v4.0/dashboards/views",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(i){if(i.Status){const s={};s.ViewId=e.ViewId,window[`${t}`]instanceof Function?window[`${t}`].call(n,s,i.StatusMessage):t.call(n,s,i.StatusMessage)}},error:function(e){n.ajaxErrorFnc(e)}})}else{if(!s)throw new Error("Please provide valid dashboard ID.");if(!o)throw new Error("Please provide valid view ID.");if(this._isEmptyOrSpaces(e.QueryString))throw new Error("Please provide valid query string.")}})),this.getViewsByDashboardId=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/.exec(e);if(n){const n=this,s={DashboardId:e};i.ajax({async:!1,type:"GET",url:this.dashboardServerApiUrl+"/v4.0/dashboards/"+e+"/views",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(e){if(e){const i=[];for(let t=0;t<e.length;t++){const n={};n.ItemId=e[`${t}`].ItemId,n.ViewId=e[`${t}`].ViewId,n.ViewName=e[`${t}`].ViewName,n.QueryString=e[`${t}`].QueryString,i.push(n)}window[`${t}`]instanceof Function?window[`${t}`].call(n,i):t.call(n,i)}else window[`${t}`]instanceof Function?window[`${t}`].call(n):t.call(n)},error:function(e){n.ajaxErrorFnc(e)}})}else if(!n)throw new Error("Please provide valid dashboard ID.")})),this.getViewByViewId=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/.exec(e);if(n){const n=this,s={ViewId:e};i.ajax({async:!1,type:"GET",url:this.dashboardServerApiUrl+"/v4.0/dashboards/views/"+e,headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(e){const i={};e&&(i.ViewId=e.ViewId,i.ViewName=e.ViewName,i.QueryString=e.QueryString),window[`${t}`]instanceof Function?window[`${t}`].call(n,i):t.call(n,i)},error:function(e){n.ajaxErrorFnc(e)}})}else if(!n)throw new Error("Please provide valid view ID.")})),this.deleteFilterView=this.Invoke((function(e,t){const n=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/.exec(e);if(n){const n=this,s={ViewId:e};i.ajax({async:!1,type:"DELETE",url:this.dashboardServerApiUrl+"/v4.0/dashboards/views/"+e,headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(s),contentType:"application/json",success:function(){window[`${t}`]instanceof Function?window[`${t}`].call(n,e):t.call(n,e)},error:function(e){n.ajaxErrorFnc(e)}})}else if(!n)throw new Error("Please provide valid view ID.")}))}static create(e){const t=new s;if(t.isMultiTab=!1,t.parentDbrdId="",t.pinboardIds=[],delete window.multiTabFilterParameter,document.addEventListener&&(document.addEventListener("webkitfullscreenchange",(function(){t._fullscreenExitHandler(t)}),!1),document.addEventListener("mozfullscreenchange",(function(){t._fullscreenExitHandler(t)}),!1),document.addEventListener("fullscreenchange",(function(){t._fullscreenExitHandler(t)}),!1),document.addEventListener("MSFullscreenChange",(function(){t._fullscreenExitHandler(t)}),!1),window.addEventListener("resize",(function(){t.isMultiTab?t.resizeDashboard(""):t._isEmptyOrSpaces(t.embedOptions.pinboardName)&&t._isNullOrUndefined(t.embedOptions.pinboardName)||t.setListMinimumHeight()}))),t._validateOptions(e)){if(t._initializeEmbedOptions(e),t.embedOptions.embedType!=s.EmbedType.Component)return t._throwError("Invalid EmbedType",t.embedOptions.embedContainerId),t.invalidDetail=!0,Object.assign(t);try{if(""==t.embedOptions.widgetList){t.childContainer=document.createElement("div"),t.childContainer.id=t.embedOptions.embedContainerId+"_embeddedbi";const e=s._gettinstance(document.getElementById(t.embedOptions.embedContainerId),"embeddedBoldBI");null==e&&null==e||e.destroy(),document.getElementById(t.embedOptions.embedContainerId).innerHTML="",document.getElementById(t.embedOptions.embedContainerId).append(t.childContainer)}if(!t._initializeUrls())return t.invalidDetail=!0,Object.assign(t);t.IsDependencyLoaded||(t.embedOptions.environment==s.Environment.Cloud?(t._isEmptyOrSpaces(t.cdnLink)||t._isEmptyOrSpaces(t.designerRootUrl))&&t._getCloudLinks():t._addJquerydependentFiles())}catch(e){return"Cannot read property append of null"==e.message?(alert("Invalid Embed Container Id"),!1):(t._throwError(e.message,t.embedOptions.embedContainerId),t.invalidDetail=!0,Object.assign(t))}if(""==t.embedOptions.widgetList){const e=document.getElementById(t.embedOptions.embedContainerId);this._hasinstance(e,"embeddedBoldBI")&&this._removeinstance(e,"embeddedBoldBI")}const i=Object.assign(t);if(""==t.embedOptions.widgetList){const e=document.getElementById(t.embedOptions.embedContainerId);this._putinstance(e,"embeddedBoldBI",i)}return i}return t._initializeEmbedOptions(e),t.invalidDetail=!0,Object.assign(t)}static getInstance(e){return s._widgetsCollection=[],this._gettinstance(document.getElementById(e),"embeddedBoldBI")}Invoke(e){const t=this;return function(...i){try{return e.apply(this,i)}catch(e){t._throwError(e,this.embedOptions.embedContainer)}}.bind(this)}destroy(){const e=this;if(this.isMultiTab){const e=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<e.length;t++){const n=i(e[`${t}`]).attr("id"),s=this._getDashboardInstance(n);null!=s&&s.destroy()}s._removeinstance(document.getElementById(this.embedOptions.embedContainerId),"embeddedBoldBI"),document.getElementById(this.embedOptions.embedContainerId).innerHTML=""}else if(i(".pinBoardDbrd").length>0)i(".pinBoardDbrd").each((function(){const t=e._getDashboardInstance(this.id);null!=t&&t.destroy()})),s._removeinstance(document.getElementById(this.embedOptions.embedContainerId),"embeddedBoldBI"),document.getElementById(this.embedOptions.embedContainerId).innerHTML="";else{const e=this.embedOptions.embedContainerId,t=this._getDashboardInstance();null!=t&&t.destroy(),s._removeinstance(document.getElementById(e),"embeddedBoldBI"),document.getElementById(e).innerHTML=""}1==this.embedOptions.isRemoveStyle&&document.querySelectorAll("link").forEach((function(t){e.cssFiles.forEach((function(e){-1!=t.href.toLowerCase().indexOf(e.toLowerCase())&&t.parentNode.removeChild(t)}))}))}loadDashboardView(){throw new Error("loadDashboardView not implemented")}exportDashboardAsPdf(e){if(this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportAsPdf(e.fileName,e.pageSize,e.pageOrientation,e.showAppliedFilters)}else{const t=this._getDashboardInstance();null!=t&&(e?t.exportAsPdf(e.fileName,e.pageSize,e.pageOrientation,e.showAppliedFilters):t.exportAsPdf())}}exportDashboardAsImage(e){if(parseInt(e.resolutionDpi,10)>300&&(e.resolutionDpi="300"),this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportAsImage(e.fileName,e.exportImageFormat,e.resolutionDpi,e.showAppliedFilters)}else{const t=this._getDashboardInstance();null!=t&&(e?t.exportAsImage(e.fileName,e.exportImageFormat,e.resolutionDpi,e.showAppliedFilters):t.exportAsImage())}}exportDashboardAsExcel(e){if(this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportAsExcel(e.fileName,e.fileType)}else{const t=this._getDashboardInstance();null!=t&&(e?t.exportAsExcel(e.fileName,e.fileType):t.exportAsExcel())}}exportWidgetAsPdf(e){const t=this;if(this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportWidgetAsPdf(e.widgetName,e.fileName,e.pageSize,e.pageOrientation,e.showAppliedFilters)}else if(i(".pinBoardDbrd").length>0){const n=i(".pinBoardDbrd").length;for(let i=0;i<n;i++)if(t.pinboardIds[`${i}`].widgetId==e.dashboardId){const n=t.pinboardIds[`${i}`].pinboardContainerId,s=t._getDashboardInstance(n+"_embeddedbi");null!=s&&s.exportWidgetAsPdf(e.widgetName,e.fileName,e.pageSize,e.pageOrientation,e.showAppliedFilters)}}else{const t=this._getDashboardInstance();null!=t&&t.exportWidgetAsPdf(e.widgetName,e.fileName,e.pageSize,e.pageOrientation,e.showAppliedFilters)}}exportWidgetAsImage(e){const t=this;if(parseInt(e.resolutionDpi,10)>300&&(e.resolutionDpi="300"),this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportWidgetAsImage(e.widgetName,e.fileName,e.exportImageFormat,e.resolutionDpi,e.showAppliedFilters)}else if(i(".pinBoardDbrd").length>0){const n=i(".pinBoardDbrd").length;for(let i=0;i<n;i++)if(t.pinboardIds[`${i}`].widgetId==e.dashboardId){const n=t.pinboardIds[`${i}`].pinboardContainerId,s=t._getDashboardInstance(n+"_embeddedbi");null!=s&&s.exportWidgetAsImage(e.widgetName,e.fileName,e.exportImageFormat,e.resolutionDpi,e.showAppliedFilters)}}else{const t=this._getDashboardInstance();null!=t&&t.exportWidgetAsImage(e.widgetName,e.fileName,e.exportImageFormat,e.resolutionDpi,e.showAppliedFilters)}}exportWidgetAsExcel(e){const t=this;if(this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportWidgetAsExcel(e.widgetName,e.fileName,e.fileType)}else if(i(".pinBoardDbrd").length>0){const n=i(".pinBoardDbrd").length;for(let i=0;i<n;i++)if(t.pinboardIds[`${i}`].widgetId==e.dashboardId){const n=t.pinboardIds[`${i}`].pinboardContainerId,s=t._getDashboardInstance(n+"_embeddedbi");null!=s&&s.exportWidgetAsExcel(e.widgetName,e.fileName,e.fileType)}}else{const t=this._getDashboardInstance();null!=t&&t.exportWidgetAsExcel(e.widgetName,e.fileName,e.fileType)}}exportWidgetAsCsv(e){const t=this;if(this.isMultiTab){let t=e.dashboardId;t=t.replaceAll("-","");const i="multi_"+t+"_embeddedbi",n=this._getDashboardInstance(i);null!=n&&n.exportWidgetAsCsv(e.widgetName,e.fileName)}else if(i(".pinBoardDbrd").length>0){const n=i(".pinBoardDbrd").length;for(let i=0;i<n;i++)if(t.pinboardIds[`${i}`].widgetId==e.dashboardId){const n=t.pinboardIds[`${i}`].pinboardContainerId,s=t._getDashboardInstance(n+"_embeddedbi");null!=s&&s.exportWidgetAsCsv(e.widgetName,e.fileName)}}else{const t=this._getDashboardInstance();null!=t&&t.exportWidgetAsCsv(e.widgetName,e.fileName)}}updateDatasource(){const e=this._getDashboardInstance();null!=e&&e.modules.queryDesigner.saveQueryInfo()}updateFilters(e){const t=this;if(this.isMultiTab){window.multiTabFilterParameter=e;const t=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let n=0;n<t.length;n++){const s=i(t[`${n}`]).attr("id"),o=this._getDashboardInstance(s);null!=o&&o.option("filterParameters",e)}}else if(i(".pinBoardDbrd").length>0)i(".pinBoardDbrd").each((function(){const i=t._getDashboardInstance(this.id);null!=i&&i.option("filterParameters",e)}));else{const t=this._getDashboardInstance();null!=t&&t.option("filterParameters",e)}}resizeDashboard(e){const t=this;if(this.isMultiTab){i("#"+t.embedOptions.embedContainerId+"_multi_tab_dashboard").css("width",i("#"+t.embedOptions.embedContainerId).width()),window.multiTabFilterParameter=e;const n=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let e=0;e<n.length;e++){const s=i(n[`${e}`]).attr("id"),o=this._getDashboardInstance(s);if(null!=o){const e=window[t.embedOptions.onResize];e instanceof Function&&e.call(this,o),this.embedOptions.onResize instanceof Function&&this.embedOptions.onResize.call(this,o),o.resizeDashboard()}}this._tabSelected()}else if(i(".pinBoardDbrd").length>0)i(".pinBoardDbrd").each((function(){const e=t._getDashboardInstance(this.id);if(null!=e){const i=window[t.embedOptions.onResize];i instanceof Function&&i.call(t,e),t.embedOptions.onResize instanceof Function&&t.embedOptions.onResize.call(t,e),e.resizeDashboard()}}));else{const e=this._getDashboardInstance();if(null!=e){const i=window[t.embedOptions.onResize];i instanceof Function&&i.call(this,e),this.embedOptions.onResize instanceof Function&&this.embedOptions.onResize.call(this,e),e.resizeDashboard()}}}refreshDashboard(){const e=this;if(this.isMultiTab){const e=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<e.length;t++){const n=i(e[`${t}`]).attr("id"),s=this._getDashboardInstance(n);null!=s&&s.updateDashboard()}}else if(i(".pinBoardDbrd").length>0)i(".pinBoardDbrd").each((function(){const t=e._getDashboardInstance(this.id);null!=t&&t.updateDashboard()}));else{const e=this._getDashboardInstance();null!=e&&e.updateDashboard()}}hidePopup(){if(this.isMultiTab){const e=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<e.length;t++){const n=i(e[`${t}`]).attr("id"),s=this._getDashboardInstance(n);null!=s&&s.hideAllPopupsForDashboard()}}else{const e=this._getDashboardInstance();null!=e&&e.hideAllPopupsForDashboard()}}hideWaitingIndicator(){if(this.isMultiTab){const e=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<e.length;t++){const n=i(e[`${t}`]).attr("id"),s=i("#"+n+"_designAreaContainer").data("BoldBIDashboardWaitingPopup");null!=s&&s.destroy()}}else{const e=i(".bbi-dashboarddesigner-designAreaContainer").data("BoldBIDashboardWaitingPopup");null!=e&&e.destroy()}}getWidgetData(e,t,n){let s;if(this.isMultiTab){const o=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let a=0;a<o.length;a++)if(i(o[`${a}`]).attr("id").includes(n.toString().replaceAll("-",""))>0){const n=i(o[`${a}`]).attr("id"),d=this._getDashboardInstance(n);null!=d&&(s=d.getWidgetData(e,t),s.toLowerCase().includes("widget")>0&&(window[`${t}`]instanceof Function?window[`${t}`].call(this,s):t.call(this,s)));break}}else{const i=this._getDashboardInstance();null!=i&&(s=i.getWidgetData(e,t),s.toLowerCase().includes("widget")>0&&(window[`${t}`]instanceof Function?window[`${t}`].call(this,s):t.call(this,s)))}}getWidgetDataWithFilters(e,t,n,s){let o;const a=JSON.stringify({dashboardId:t,widgetName:e,filter:n});if(this._isEmptyOrSpaces(t))return o={status:!1,message:"dashboardId is invalid",request:a},o;if(this._isEmptyOrSpaces(e))return o={status:!1,message:"widgetName is invalid",request:a},o;const d=this;return i.ajax({type:"POST",url:this.designerRootUrl+"/v1.0/design/loadwidgetdata",data:a,contentType:"application/json; charset=utf-8",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+d.accessToken),e.setRequestHeader("Caller",d.dashboardServerApiUrl)},success:function(e){o=e.Status?{status:e.Status,data:e.Data,message:e.Message,request:a}:{status:e.Status,message:e.Message,request:a},s.call(d,o)},error:function(e,t){o={status:!1,message:t,request:e},s.call(d,o)}}),o={status:!0,message:"Data fetching initiated.",request:a},o}getDashboardCategories(e,t){const i=this._isNullOrUndefined(t)||this._isEmptyOrSpaces(t)?this._getDashboardInstance():this._getDashboardInstance(t+"_embeddedbi");if(null!=i){const t=i.GetDashboardCategories(e);window[`${e}`]instanceof Function?window[`${e}`].call(this,t):e.call(this,t)}}createDashboardCategory(e,t,i,n){const s=this._isNullOrUndefined(n)||this._isEmptyOrSpaces(n)?this._getDashboardInstance():this._getDashboardInstance(n+"_embeddedbi");if(null!=s){const n=s.CreateDashboardCategory(e,t,i);window[`${i}`]instanceof Function?window[`${i}`].call(this,n):i.call(this,n)}}saveDashboard(e,t){const i=this._isNullOrUndefined(t)||this._isEmptyOrSpaces(t)?this._getDashboardInstance():this._getDashboardInstance(t+"_embeddedbi");null!=i&&(i.model.serverSettings.enableMarkAsPublic=!!e.IsPublic&&e.IsPublic,i.saveDashboardToServer(e))}getWidgetInstance(e){const t=new o;t.containerID=this.embedOptions.embedContainerId,this._widgetsCollection[this._widgetsCollection.length]=e;const i=Object.assign(t);return t.widgetCollection=this._widgetsCollection,s._hasinstance(document.getElementById(this.embedOptions.embedContainerId),"embeddedBoldBIWidget_"+e)||s._putinstance(document.getElementById(this.embedOptions.embedContainerId),"embeddedBoldBIWidget_"+e,i),i}updateWidgetFilters(e){const t=this,n=this._getWidgetFilterInfo();if(this.isMultiTab){const e=i("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<e.length;t++){const s=i(e[`${t}`]).attr("id"),o=this._getDashboardInstance(s);null!=o&&o.option("widgets",n)}}else if(i(".pinBoardDbrd").length>0)i(".pinBoardDbrd").each((function(){const e=t._getDashboardInstance(this.id);null!=e&&e.option("widgets",n)}));else{const t=this._isNullOrUndefined(e)||this._isEmptyOrSpaces(e)?this._getDashboardInstance():this._getDashboardInstance(e+"_embeddedbi");null!=t&&t.option("widgets",n)}}_initializeEmbedOptions(e){this.embedOptions=Object.assign(this.embedOptions,e)}_loadCloudDepedentFiles(e){const t=e.Data;this.cdnLink=t.CdnUrl,this.designerRootUrl=t.DesignerServerUrl,this._addJquerydependentFiles()}_getCloudLinks(){this._xhrRequestHelper("Get",this.dashboardServerApiUrl+"/system-settings/get-url",{},{},this._loadCloudDepedentFiles)}_loadDepedentFiles(){this.embedOptions.dashboardSettings.themeSettings&&!this.embedOptions.dashboardSettings.themeSettings.isLocalTheme&&this.embedOptions.dashboardSettings.themeSettings.dashboard?this._addedDependentFiles(this,this.dashboardThemeCssFiles,!0):this.embedOptions.dashboardSettings.themeSettings&&!this.embedOptions.dashboardSettings.themeSettings.isLocalTheme?this._addedDependentFiles(this,this.applicationThemeCssFiles,!0):this.embedOptions.dashboardSettings.themeSettings||this._addedDependentFiles(this,this.applicationThemeCssFiles,!0),this.embedOptions.mode==s.Mode.Design||this.embedOptions.mode==s.Mode.DataSource||this.embedOptions.mode==s.Mode.Connection?this._addedDependentFiles(this,this.designerScriptFiles,!1):this._addedDependentFiles(this,this.viewerScriptFiles,!1),""!=this.embedOptions.pinboardName&&this._addedDependentFiles(this,this.pinBoardScriptFiles,!1),this._addedDependentFiles(this,this.cssFiles,!0),""!=this.embedOptions.pinboardName&&this._addedDependentFiles(this,this.pinboardCssFiles,!0),this.embedOptions.mode!=s.Mode.Design&&this.embedOptions.mode!=s.Mode.DataSource&&this.embedOptions.mode!=s.Mode.Connection||this._addedDependentFiles(this,this.designerCssFiles,!0),this.embedOptions.isBingMapRequired&&this._loadBingmapDependentFiles(),this._loadDependentDesignerFiles(this)}_loadBingmapDependentFiles(){i('<script type="text/javascript" src="https://www.bing.com/api/maps/mapcontrol" async><\/script>').appendTo("head")}_loadDependentDesignerFiles(e){window.BoldBIDashboard instanceof Object&&window.BoldBIDashboard.createObject instanceof Function&&window.Designer instanceof Object?(e._addedDependentFiles(e,e.ejViewerDependentFiles,!1),e.embedOptions.mode!=s.Mode.Design&&e.embedOptions.mode!=s.Mode.DataSource&&e.embedOptions.mode!=s.Mode.Connection||e._addedDependentFiles(e,e.ejDesignerDependentFiles,!1)):setTimeout(e._loadDependentDesignerFiles,50,e)}_addWrapperDependentFiles(e,t){const i=e;t.forEach(function(e){if(!("jquery-ui.min.js"==e&&null!=window.jQuery.ui&&"1.12.1"==window.jQuery.ui.version||"jsrender.min.js"==e&&null!=window.jQuery.views&&"v1.0.0-beta"==window.jQuery.views.jsviews)){const t=document.createElement("script");if("jquery.easing.1.3.min.js"==e){const n=i.embedOptions.environment==s.Environment.Enterprise?i.rootUrl+"/cdn/scripts/designer/"+e:i.cdnLink+"/scripts/designer/"+e;t.append('bbEmbed(document).ready(function () { bbEmbed.getScript("'+n+'");});')}"jquery-ui.min.js"==e?t.src=i.embedOptions.environment==s.Environment.Enterprise?i.rootUrl+"/cdn/scripts/"+e:i.cdnLink+"/scripts/"+e:"jsrender.min.js"==e&&(t.src=i.embedOptions.environment==s.Environment.Enterprise?i.rootUrl+"/cdn/scripts/designer/"+e:i.cdnLink+"/scripts/designer/"+e),document.head.appendChild(t)}}.bind(i))}_addedDependentFiles(e,t,n){let o="";t.forEach(function(t){if(!e._checkDepedentFileExists(t,n))if(n){e.embedOptions.environment==s.Environment.Enterprise?"font-server.min.css"==t?o=e.rootUrl+"/cdn/css/"+t:"bootstrap.min.css"==t?o=e.rootUrl+"/Content/Styles/Bootstrap/"+t:"pinboard-embed.min.css"==t?o=e.rootUrl+"/cdn/css/"+t:"boldbi.theme.definition.min.css"==t?o=!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.appearance)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.appearance)?e.rootUrl+"/cdn/css/designer/light/"+t:e.rootUrl+"/cdn/css/designer/"+e.embedOptions.dashboardSettings.themeSettings.appearance+"/"+t:"application.theme.css"==t||"dashboard.theme.css"==t?!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.dashboard)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.dashboard)?!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.application)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.application)||(o=e.customThemeUrl+"/application?theme="+e.embedOptions.dashboardSettings.themeSettings.application):o=e.customThemeUrl+"/dashboard?theme="+e.embedOptions.dashboardSettings.themeSettings.dashboard:o=e.rootUrl+"/webdesignerservice/themes/"+t:"font-server.min.css"==t||"bootstrap.min.css"==t||"pinboard-embed.min.css"==t?o=e.cdnLink+"/css/"+t:"boldbi.theme.definition.min.css"==t?o=!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.appearance)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.appearance)?e.cdnLink+"/css/designer/light/"+t:e.cdnLink+"/css/designer/"+e.embedOptions.dashboardSettings.themeSettings.appearance+"/"+t:"application.theme.css"==t||"dashboard.theme.css"==t?!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.dashboard)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.dashboard)?!e.embedOptions.dashboardSettings.themeSettings||e.embedOptions.dashboardSettings.themeSettings.isLocalTheme||e._isNullOrUndefined(e.embedOptions.dashboardSettings.themeSettings.application)||e._isEmptyOrSpaces(e.embedOptions.dashboardSettings.themeSettings.application)||(o=e.rootUrl+"/theme/styles/application?theme="+e.embedOptions.dashboardSettings.themeSettings.application):o=e.rootUrl+"/theme/styles/dashboard?theme="+e.embedOptions.dashboardSettings.themeSettings.dashboard:o=e.cdnLink+"/css/designer/"+t;const n=document.createElement("link");n.rel="stylesheet",n.href=o,i('link[href="'+o+'"]').length<1&&document.head.appendChild(n)}else{o=e.embedOptions.environment==s.Environment.Enterprise?"bootstrap.min.js"==t?e.rootUrl+"/cdn/scripts/"+t:"designerlocalization.js"==t?e.rootUrl+"/designer/localization/"+t+"?c="+e.embedOptions.localeSettings.appLocale:"signalr.min.js"==t?e.rootUrl+"/cdn/scripts/signalr/"+t:e.rootUrl+"/cdn/scripts/designer/"+t:"bootstrap.min.js"==t?e.cdnLink+"/scripts/"+t:"designerlocalization.js"==t?e.designerRootUrl+"/localization/"+t:"signalr.min.js"==t?e.cdnLink+"/scripts/signalr/"+t:e.cdnLink+"/scripts/designer/"+t;const n=document.createElement("script");n.type="text/javascript",n.src=o,i('script[src= "'+o+'"]').length<1&&document.head.appendChild(n)}}.bind(e))}_checkDepedentFileExists(e,t){let i=!1;const n=t?"link":"script";return document.head.querySelectorAll(n).forEach((function(n){i||(i=t?-1!=n.href.indexOf(e):-1!=n.src.indexOf(e))})),i}_renderPinboard(e){const t=i('<div id="server-app-container" style="background: #f9f9f9; overflow: hidden !important;min-height: 600px; width:'+this.embedOptions.width+';"><div id="content-area" class="clearfix col-xs-12 e-waitingpopup e-js" style="padding: 0;padding-bottom: 30px"><div id="homepage-page-container"><div id="homepage-header" style="display:'+(this.embedOptions.pinboardSettings.enablePinboardHeader||void 0===this.embedOptions.pinboardSettings.enablePinboardHeader?"block":"none")+'"><div id="element-container"><div id="homepage-menu" style="margin-top: 5px"><span id="homepage-list-container" style="font-size: 15px;width: 165px;line-height: 18px;padding: 25px;">'+this.embedOptions.pinboardName+'</span></div><div id="options-container"><div id="pinboard-fullscreen" class="server-banner-icon e-dashboard-banner-icon bbi-dbrd-designer-hoverable su su-maximize-1 e-icon-dbrd-theme" data-tooltip="Fullscreen" data-name="fullscreen" data-event="true" style="font-size: 14px;display: block;float: left;margin: 8px 15px 0 7px; cursor: pointer"></div><div id="divider"></div><div id="layout-container"><div id="layout" class="dropdown-toggle" data-toggle="dropdown">Edit Layout</div><div class="dropdown-menu" id="layout-items" role="menu"><span class="su su-single-column" id="1"></span><span class="su su-two-column" id="11"></span><span class="su su-small-big-column" id="12"></span><span class="su su-big-small-column" id="21"></span><span class="su su-three-column" id="111"></span></div></div></div></div></div><div id="widget-container" data-homepage-id="" data-current-layout="" data-virtual-homepage="" style="margin-bottom: 30px"></div></div></div></div>');i("#"+this.embedOptions.embedContainerId).append(t),this._createPinboardDom(e),this._renderItem(e),this._removeElementsClass(this.embedOptions.embedContainerId,".preloader-wrap","viewer-blue-loader");const n=this;i(document).on("click",".unpin-widget",(function(e){e.preventDefault();const t=i("#"+i(e.target).parents("li").find(".pinWidget").attr("id")+"_embeddedbi").data("BoldBIDashboardDesigner"),s=window[n.embedOptions.onUnpin];s instanceof Function&&s.call(this,t),n.embedOptions.onUnpin instanceof Function&&n.embedOptions.onUnpin.call(n,t),n.column=parseInt(i(this).closest("ul").attr("data-column-id"),10),n.position=i(this).parents("li").index()+1,t.destroy(),n._unPinItem(n.column,n.position)})),i(document).on("click","#pinboard-fullscreen",(function(){const e=i("#server-app-container")[0];document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(i("#server-app-container").attr("style","background-color: #f9f9f9; height:"+i("#content-area").height()+"px;overflow: hidden !important;min-height: 600px; width:"+n.embedOptions.width),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()):(i("#server-app-container").removeAttr("style"),i("#server-app-container").attr("style","background-color: #f9f9f9; overflow: auto !important"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):"ActiveXObject"in window&&(new ActiveXObject("Wscript.shell").SendKeys("{F11}"),setTimeout((function(){(screen.availHeight||screen.height-30)<=window.innerHeight?i("#pinboard-fullscreen").removeClass("su-maximize-1").addClass("su-minimize").attr("data-tooltip","Exit Fullscreen"):i("#pinboard-fullscreen").addClass("su-maximize-1").removeClass("su-minimize").attr("data-tooltip","Fullscreen")}),400)))})),i(document).on("click","#layout-items span",(function(){const e=window[n.embedOptions.onLayoutChange];e instanceof Function&&e.call(this,i("#widget-container")),n.embedOptions.onLayoutChange instanceof Function&&n.embedOptions.onLayoutChange.call(n,i("#widget-container"));const t=i("#widget-container").attr("data-current-layout");switch(i("#widget-container").attr("data-current-layout",i(this).attr("id")),i("#layout-items span").removeClass("active"),i(this).addClass("active"),i(this).attr("id")){case"1":"1"!=t&&(n.changeLayout(1),"111"==t?n.appendListItem(1,2):"11"!=t&&"12"!=t&&"21"!=t||n.appendListItem(1,1),n._setLayout(1));break;case"11":"11"!=t&&(n.changeLayout(11),"111"==t?n.appendListItem(2,1):"1"==t&&n.createEmptyList(2,2),n._setLayout(11));break;case"12":"12"!=t&&(n.changeLayout(12),"111"==t?n.appendListItem(2,1):"1"==t&&n.createEmptyList(2,2),n._setLayout(12));break;case"21":"21"!=t&&(n.changeLayout(21),"111"==t?n.appendListItem(2,1):"1"==t&&n.createEmptyList(2,2),n._setLayout(21));break;case"111":"111"!=t&&(n.changeLayout(111),"1"==t?n.createEmptyList(2,3):"11"!=t&&"12"!=t&&"21"!=t||n.createEmptyList(3,3),n._setLayout(111))}})),i.map(n.pinboardDetails,(function(e){n.isWidgetMode=!0,n.widgetName=e.WidgetId,n.isDashboardViewMode=!1,n.dashboardViewName="";const t={Apistatus:!0,Data:JSON.parse(e),Status:!0};n._renderDashboard(t)}))}createEmptyList(e,t){for(let n=e;n<=t;n++)i("#widget-container").append('<ul id="column-'+n+'" data-column-id="'+n+'" data-child-count="0"><li class="empty click-container"><div class="empty-content empty-homepage"><span class="drag-widget">Drag your widgets here to customize layout</span></div></li></ul>')}appendListItem(e,t){for(let n=e+1;n<=e+t;n++)i("#column-"+n+" li:not(.empty)").length>0&&i("#column-"+e+" li.empty").remove(),i("#column-"+e).append(i("#column-"+n+" li:not(.empty)")),i("#column-"+n).remove()}changeLayout(e){const t=this;let n;t.homepageItemId=i("#widget-container").attr("data-homepage-id"),t.isVirtualHomepage=i("#widget-container").attr("data-virtual-homepage"),""==t.homepageItemId&&t.isVirtualHomepage&&i("#initial-message").hide();const s="embed_nonce="+this._uuidv4Generartor()+"&homepageId="+t.homepageItemId+"&layout="+e+"&embed_mode="+this.embedOptions.mode+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+this.embedOptions.expirationTime;t._isEmptyOrSpaces(t.embedOptions.authorizationServer.url)?(n={homepageId:t.homepageItemId,layout:e},i.ajax({async:!1,type:"POST",url:t.dashboardServerApiUrl+this.embedGetDetailsEndPoint,headers:{Authorization:"Bearer "+t.accessToken},data:JSON.stringify(n),contentType:"application/json",success:i.proxy(t._changeLayoutSuccess,t)})):(n={embedQuerString:encodeURI(s),dashboardServerApiUrl:this.dashboardServerApiUrl},this._xhrRequestHelper("POST",this.embedOptions.authorizationServer.url,n,this.embedOptions.authorizationServer.headers,this._changeLayoutSuccess))}_checkEmptyHomepage(){let e=0,t=!1;return i("#widget-container ul").each((function(n){return e=i("#column-"+(n+1)+' li:not(".empty")').length,t=!(e>0),!(e>0)})),t}_setLayout(e){const t=i("#widget-container").attr("data-item-type").toLowerCase();switch(i("#layout-items").find("span#"+e).addClass("active"),e){case 1:i("#column-1").removeClass().addClass("col-lg-12 col-md-12 col-sm-12 col-xs-12");break;case 11:i("#column-1,#column-2").removeClass().addClass("col-lg-6 col-md-6 col-sm-6 col-xs-6");break;case 12:i("#column-1").removeClass().addClass("col-lg-4 col-md-4 col-sm-4 col-xs-4"),i("#column-2").removeClass().addClass("col-lg-8 col-md-8 col-sm-8 col-xs-8");break;case 21:i("#column-1").removeClass().addClass("col-lg-8 col-md-8 col-sm-8 col-xs-8"),i("#column-2").removeClass().addClass("col-lg-4 col-md-4 col-sm-4 col-xs-4");break;case 111:i("#column-1,#column-2,#column-3").removeClass().addClass("col-lg-4 col-md-4 col-sm-4 col-xs-4")}if(this._checkEmptyHomepage()&&(window.IsMobile?(i("#widget-container ul li.empty .empty-content").removeClass("non-empty-homepage").addClass("mobile-empty-homepage"),i("#widget-container ul li.empty .empty-content").find(".drag-widget").text("Log in using a desktop client to add widgets to this pinboard.").show(),i("#widget-container ul li.empty").css("border","none")):(i("#widget-container ul li.empty .empty-content").find(".drag-widget").hide(),i("#widget-container ul li.empty .empty-content").removeClass("non-empty-homepage").addClass("empty-homepage"))),"dashboard"!=t){const e=this;this.enableSorting(),this.setListMinimumHeight(),i(".pinBoardDbrd").each((function(){const t=e._getDashboardInstance(this.id),i=window[e.embedOptions.onResize];i instanceof Function&&i.call(e,t),e.embedOptions.onResize instanceof Function&&e.embedOptions.onResize.call(e,t),t.resizeDashboard()}))}}setListMinimumHeight(){const e=[];i("#widget-container > ul").each((function(t){let n=0;i(this).find("li").each((function(){n=n+i(this).innerHeight()+20})),e[`${t}`]=n}));const t=Math.max(...e)>400?Math.max(...e):440;i("#widget-container > ul").css("min-height",t),i("#server-app-container").height(i("#content-area").height())}enableSorting(){const e=this;window.bbEmbed("#column-1, #column-2, #column-3").sortable({connectWith:"ul",placeholder:"placeholder",handle:".e-rteItem .e-rte-content, .bbi-dbrd-control-header:not(.bbi-dbrd-control-menu-icon)",cancel:".empty, .bbi-dbrd-control-menu-icon",containment:"#server-app-container",cursor:"move",tolerance:"pointer",scroll:!0,scrollSensitivity:10,scrollSpeed:20,update:function(t,n){e.toColumn=i(t.target).data("column-id"),e.toPosition=n.item.index()+1},start:function(t,n){i("li.placeholder").append('<div class="placeholder-text" style="color: dimgray; font-size: 20px;padding-top: 10px;text-align: center;">Drag your widgets here to customize layout</div>'),i("li.placeholder").css({height:n.item.height().toString()+"px","background-color":"#eeeeee",border:"dashed lightgray"}),i("#widget-container ul li.empty").remove(),e.fromColumn=i(t.target).data("column-id"),e.fromPosition=n.item.index()+1,e.toColumn=i(t.target).data("column-id"),e.toPosition=n.item.index()+1;const s=i("#"+n.item.find(".pinWidget").attr("id")+"_embeddedbi").data("BoldBIDashboardDesigner"),o=window[e.embedOptions.onDrag];o instanceof Function&&o.call(this,s),e.embedOptions.onDrag instanceof Function&&e.embedOptions.onDrag.call(e,s)},stop:function(t,n){e.showEmptyList();const s=window[e.embedOptions.onDrop],o=i("#"+n.item.find(".pinWidget").attr("id")+"_embeddedbi").data("BoldBIDashboardDesigner");s instanceof Function&&s.call(this,o),e.embedOptions.onDrop instanceof Function&&e.embedOptions.onDrop.call(e,o),e.fromColumn==e.toColumn&&e.fromPosition==e.toPosition||(e.fromColumn!=e.toColumn&&window.bbEmbed("#"+n.item.find(".pinWidget").attr("id")+"_embeddedbi").data("BoldBIDashboardDesigner").resizeDashboard(),e.dragAndDrop(e.fromColumn,e.toColumn,e.fromPosition,e.toPosition)),e.setListMinimumHeight()}}),window.bbEmbed("#column-1, #column-2, #column-3").disableSelection()}showEmptyList(){i("#widget-container ul").each((function(e){i("#column-"+(e+1)+" li").length<1&&i("#column-"+(e+1)).append('<li class="empty click-container"><div class="empty-content empty-homepage"><span class="drag-widget">Drag your widgets here to customize layout</span></div></li>')}))}dragAndDrop(e,t,n,s){const o=this;let a;const d=i("#widget-container").attr("data-homepage-id"),r={Column:e,Position:n},l={Column:t,Position:s},h="embed_nonce="+this._uuidv4Generartor()+"&homepageId="+d+"&moveFrom="+JSON.stringify(r)+"&moveTo="+JSON.stringify(l)+"&embed_mode="+this.embedOptions.mode+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+this.embedOptions.expirationTime;o._isEmptyOrSpaces(o.embedOptions.authorizationServer.url)?(a={homepageId:d,moveFrom:JSON.stringify(r),moveTo:JSON.stringify(l)},i.ajax({async:!1,type:"POST",url:o.dashboardServerApiUrl+this.embedGetDetailsEndPoint,data:JSON.stringify(a),headers:{Authorization:"Bearer "+o.accessToken},contentType:"application/json",success:i.proxy(o._dragAndDropSuccess,o)})):(a={embedQuerString:encodeURI(h),dashboardServerApiUrl:this.dashboardServerApiUrl},this._xhrRequestHelper("POST",this.embedOptions.authorizationServer.url,a,this.embedOptions.authorizationServer.headers,this._dragAndDropSuccess))}_unPinItem(e,t){const n=this;let s;const o=i("#widget-container").attr("data-homepage-id"),a={Column:e,Position:t},d="embed_nonce="+this._uuidv4Generartor()+"&homepageId="+o+"&unpinPosition="+JSON.stringify(a)+"&isUnpin="+!0+"&embed_mode="+this.embedOptions.mode+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+this.embedOptions.expirationTime;n._isEmptyOrSpaces(n.embedOptions.authorizationServer.url)?(s={homepageId:o,unpinPosition:JSON.stringify(a),isUnpin:!0},i.ajax({async:!1,type:"POST",url:n.dashboardServerApiUrl+this.embedGetDetailsEndPoint,headers:{Authorization:"Bearer "+n.accessToken},data:JSON.stringify(s),contentType:"application/json",success:i.proxy(n._unPinSuccess,n)})):(s={embedQuerString:encodeURI(d),dashboardServerApiUrl:this.dashboardServerApiUrl},this._xhrRequestHelper("POST",this.embedOptions.authorizationServer.url,s,this.embedOptions.authorizationServer.headers,this._unPinSuccess))}_unPinSuccess(e){e.Status&&(i("#column-"+this.column+" li:eq("+(this.position-1)+")").remove(),this.showEmptyList(),this.checkEmptyHomepage()&&(i("#widget-container ul li.empty .empty-content").find(".drag-widget").hide(),i("#widget-container ul li.empty .empty-content").removeClass("non-empty-homepage").addClass("empty-homepage")),this.setListMinimumHeight())}checkEmptyHomepage(){let e=0,t=!1;return i("#widget-container ul").each((function(n){return e=i("#column-"+(n+1)+' li:not(".empty")').length,t=!(e>0),!(e>0)})),t}_renderItem(e){const t=this;if(this._checkEmptyHomepage()&&(i("#widget-container ul li.empty .empty-content").find(".drag-widget").hide(),i("#widget-container ul li.empty .empty-content").removeClass("non-empty-homepage").addClass("empty-homepage")),i("#widget-container").hide(),"widget"==e.ItemType.toLowerCase()){this._setLayout(e.ColumnInfo.Layout);const n=e.ColumnInfo.Column;i.each(n,(function(e){n[`${e}`].Item.length>0?(i.each(n[`${e}`].Item,(function(s){if(".sydj"!=n[`${e}`].Item[`${s}`].ItemExtension.toLowerCase())i("#widget_"+(e+1)+"_"+(s+1)).ejDashboardViewer({accessToken:this.accessToken,serviceUrl:this.dashboardServiceUrl,serverUrl:this.dashboardServerUrl,_enableHyperLinkOnErrorMessage:!1,cdnFilePath:this.isUseCdn?this.cdnLink+"/scripts/viewer":"",dashboardPath:n[`${e}`].Item[`${s}`].Path,_itemId:n[`${e}`].Item[`${s}`].ItemId,reportName:"",reportDescription:"",enableExport:!0,enablePrint:!1,actionBegin:function(e){"beforeNavigate"==e.eventType&&(this.hasWidgetLink=!0)},localeSettings:{resourcePath:""},enableWidgetMode:null!=n[`${e}`].Item[`${s}`].Id,filterParameters:n[`${e}`].Item[`${s}`].QueryString,showTab:null==n[`${e}`].Item[`${s}`].TabId,widgetModeSettings:{name:"",id:null==n[`${e}`].Item[`${s}`].Id?"":n[`${e}`].Item[`${s}`].Id,title:n[`${e}`].Item[`${s}`].Name},_selectedTabGuid:null==n[`${e}`].Item[`${s}`].TabId?"":n[`${e}`].Item[`${s}`].TabId,afterWidgetRender:i.proxy((function(t,n){if("card"==n.data.controlType.toLowerCase()&&(i("#widget_"+(e+1)+"_"+(s+1)+" .e-control-heading span").hasClass("e-control-title")||i("#widget_"+(e+1)+"_"+(s+1)+" .e-control-heading").text(t[`${e}`].Item[`${s}`].Name)),t[`${e}`].Item[`${s}`].IsActive&&!t[`${e}`].Item[`${s}`].IsHavingPermission?(i("#widget_"+(e+1)+"_"+(s+1)).find(".bbi-dbrd-control").remove(),i("#widget_"+(e+1)+"_"+(s+1)).find(".bbi-dbrd-control-container").append('<div class="no-permission"><span class="message">You do not have permission to view this widget.</span></div>')):t[`${e}`].Item[`${s}`].IsActive||t[`${e}`].Item[`${s}`].IsHavingPermission||(i("#widget_"+(e+1)+"_"+(s+1)).find(".bbi-dbrd-control").remove(),i("#widget_"+(e+1)+"_"+(s+1)).find(".bbi-dbrd-control-container").append('<div class="no-permission"><span class="message">This widget has been deleted.</span></div>')),t[`${e}`].Item[`${s}`].IsActive&&t[`${e}`].Item[`${s}`].IsHavingPermission&&null!=t[`${e}`].Item[`${s}`].QueryString){const t=i("#widget_"+(e+1)+"_"+(s+1));t.find("#filter-info").parent().append('<div class="filter-overview"><span id="heading">Applied Filters</span><div id="outer-div"><div id="scroller-content"><div id="applied-filters-container"></div></div></div></div>'),t.find(".filter-overview #applied-filters-container").height()>180&&t.find(".filter-overview #scroller-content").BoldBIDashboardScroller({height:180,width:248,scrollerSize:9}),t.find(".filter-overview").addClass("display-none")}}),this,n),beforeWidgetIconRendered:i.proxy((function(t,n){"widget not configured"!=n.widgetInformation.Name.toLowerCase()?window.IsMobile?i("#widget_"+(e+1)+"_"+(s+1)).data("ejDashboardViewer").model.size.height="250px":"card"!=n.widgetInformation.Name.toLowerCase()?i("#widget_"+(e+1)+"_"+(s+1)).data("ejDashboardViewer").model.size.height="400px":i("#widget_"+(e+1)+"_"+(s+1)).data("ejDashboardViewer").model.size.height="250px":(i("#widget_"+(e+1)+"_"+(s+1)).data("ejDashboardViewer").model.size.height="200px",i("#widget_"+(e+1)+"_"+(s+1)).find(".bbi-dbrd-control-container").append('<div class="no-permission"><span class="message">This widget has been deleted.</span></div>')),n.iconsinformation.length>0&&"bbi-dbrd-link-enable"==n.iconsinformation[0].classname&&(n.iconsinformation[0].margintop="1px"),window.IsMobile||n.iconsinformation.unshift({classname:"su su-delete unpin",name:"Unpin Widget",datatooltip:"Unpin Widget",marginright:"-18px",margintop:"4px"});const o=t[`${e}`].Item[`${s}`].IsActive&&t[`${e}`].Item[`${s}`].IsHavingPermission&&"widget not configured"!=n.widgetInformation.Name.toLowerCase();o&&(n.iconsinformation.unshift({classname:"su su-maximize unpin",name:"Maximize Widget",datatooltip:"Maximize Widget",marginright:"-18px",margintop:"4px"}),n.iconsinformation.unshift({classname:"su su-open-link-newtab unpin",name:"Go to Dashboard",datatooltip:"Go to Dashboard",marginright:"-18px",margintop:"4px"})),o&&null!=t[`${e}`].Item[`${s}`].QueryString&&n.iconsinformation.unshift({id:"filter-info",classname:"su su-info unpin",name:"Applied Filters",datatooltip:"View Applied Filters",margintop:"4px",marginright:"0px"}),i("#widget-container").show(),i("#widget_"+(e+1)+"_"+(s+1)).ejDashboardViewer().resize()}),this,n),dashboardCreated:function(){const t=i("#widget_"+(e+1)+"_"+(s+1)).attr("data-dashboardurl");i("#widget_"+(e+1)+"_"+(s+1)).find(".su-open-link-newtab").wrap(i('<a class="redirect" href="'+t+'" target="_blank">'))},onMenuIconClick:function(e){if(void 0!==e.name&&"unpin widget"==e.name.toLowerCase()){const t=e.target.parents("ul").data("column-id"),i=e.target.parents("li").index()+1;this.unPinItem(t,i,e.event)}else if(void 0!==e.name&&"maximize widget"==e.name.toLowerCase());else if(void 0!==e.name&&"applied filters"==e.name.toLowerCase()){const t=i(e.event.target).parent().find(".filter-overview");t.toggleClass("display-none"),i(".filter-overview").not(t).addClass("display-none"),e.event.preventDefault()}}});else{const o=t.embedOptions.embedContainerId+"_pinBoard_"+(e+1)+"_"+(s+1);i("#widget_"+(e+1)+"_"+(s+1)).append('<div class="pinWidget" style="height:calc(100% - 5px);width:93%;overflow: hidden !important;" id="'+o+'"><div id="'+o+'_embeddedbi" class="pinBoardDbrd"></div ></div>'),t.pinBoardRendered=!1,t.pinboardIds.push({widgetId:n[`${e}`].Item[`${s}`].Id,pinboardContainerId:o}),t.pinboardDetails[t.pinboardDetails.length]=n[`${e}`].Item[`${s}`].WidgetDetails,n[`${e}`].Item[`${s}`].IsActive&&!n[`${e}`].Item[`${s}`].IsHavingPermission?(i("#widget_"+(e+1)+"_"+(s+1)).find("iframe").remove(),i("#widget_"+(e+1)+"_"+(s+1)).append('<div class="no-permission"><span class="message">You do not have permission to view this widget.</span></div>')):n[`${e}`].Item[`${s}`].IsActive||n[`${e}`].Item[`${s}`].IsHavingPermission||(i("#widget_"+(e+1)+"_"+(s+1)).find("iframe").remove(),i("#widget_"+(e+1)+"_"+(s+1)).append('<div class="no-permission"><span class="message">This widget has been deleted.</span></div>'))}})),i("#widget-container").show()):i("#widget-container").show()})),this.enableSorting(),this.setListMinimumHeight()}else if("dashboard"==e.ItemType.toLowerCase()){const t=e.ColumnInfo.Column;i("#dashboard_1_1").css({height:i(window).height()-i("#header-area").outerHeight()-i("#base-footer-div").outerHeight()-i("#homepage-header").outerHeight()-30,width:i("#content-area").width()-10}),t[0].Item[0].IsActive&&t[0].Item[0].IsHavingPermission&&".sydj"!=t[0].Item[0].ItemExtension.toLowerCase()?i("#dashboard_1_1").ejDashboardViewer({dashboardPath:e.ColumnInfo.Column[0].Item[0].Path,_itemId:e.ColumnInfo.Column[0].Item[0].ItemId,reportName:"",reportDescription:"",enableExport:!0,enablePrint:!1,showGetLinkIcon:!1,localeSettings:{resourcePath:""},interactionSettings:{allowHistoryMaintenance:!1,handleHistoryEvent:!1},enableWidgetMode:!1,filterParameters:e.ColumnInfo.Column[0].Item[0].QueryString,showTab:null==e.ColumnInfo.Column[0].Item[0].TabId,_selectedTabGuid:null!=e.ColumnInfo.Column[0].Item[0].TabId?e.ColumnInfo.Column[0].Item[0].TabId:"",beforeControlMenuOpen:function(e){e.menuData.splice(1,1)},onTabSelectionFailure:"OnFailtoLoadChildDashboard",beforeContextMenuOpen:function(e){!function(e,t,i){let n=e.length;for(;n--;)e[`${n}`]&&Object.prototype.hasOwnProperty.call(e[`${n}`],t)&&arguments.length>2&&e[`${n}`][`${t}`]==i&&e.splice(n,1)}(e.menuData,"text","Export")}}):t[0].Item[0].IsActive?t[0].Item[0].IsActive&&!t[0].Item[0].IsHavingPermission?i("#dashboard_1_1").append('<div class="no-permission"><span class="message">You do not have permission to view this dashboard.</span></div>'):t[0].Item[0].IsActive&&t[0].Item[0].IsHavingPermission&&".sydj"==t[0].Item[0].ItemExtension.toLowerCase()&&i("#dashboard_1_1").append('<div class="no-permission"><span class="message">Currently this dashboard is not supported.</span></div>'):i("#dashboard_1_1").append('<div class="no-permission"><span class="message">This dashboard has been deleted.</span></div>'),i("#widget-container").show()}}_addWidgetInPinboard(e){const t=i("#widget-container").find("ul:first");1==i("#widget-container").find("ul:first li").length&&i("#widget-container").find("ul:first li").hasClass("empty")&&i("#widget-container").find("ul:first li").remove();const n=i("#widget-container").find("ul:first li").length,s=e.ColumnInfo.Column[0],o=null==s.Item[0].Id?"/bi/"+this.siteIdentifier+"/widgets/widgets":"/bi/"+this.siteIdentifier+"/dashboards",a=s.Item[0].Name,d=s.Item[0].WidgetType;let r=0;r=null!=d&&(d.includes("Card")||d.includes("Image"))?250:400;const l=null!=s.Item[0].QueryString?s.Item[0].QueryString:"",h=null==s.Item[0].TabId?o+"/"+s.Item[0].ItemId+"/"+(null!=s.Item[0].Id?s.Item[0].CategoryName+"/":"")+s.Item[0].ItemName+(""!=l?"?"+l:l):o+"/"+s.Item[0].ItemId+"/"+(null!=s.Item[0].Id?s.Item[0].CategoryName+"/":"")+s.Item[0].ItemName+"?tab="+s.Item[0].TabId+(""!=l?"&"+l:l),m=this.embedOptions.pinboardSettings.enableUnpinWidget||void 0===this.embedOptions.pinboardSettings.enableUnpinWidget?'<div id="widget-icons"><i class="items unpin-widget su su-delete" data-toggle="tooltip" data-original-title="Unpin Widget"  style="color: black;" /></div>':"";i(t).prepend('<li class="list-item"><div class="widget" id=widget_1_'+(n+1)+' data-dashboardurl="'+h+'" style="height: '+r+'px;width:100%;background:#fff;"><div class="widget-sortable" style="width:100%;float:left;display:block;height:0px"><div style="height:100%;width:100%;cursor:move;"><div id="item-name">'+a+"</div>"+m+"</div></div></div></li>");const c=this.embedOptions.embedContainerId+"_pinBoard_1_"+(n+1);i("#widget_1_"+(n+1)).append('<div class="pinWidget" style="height:calc(100% - 5px);width:93%;overflow: hidden !important;" id="'+c+'"><div id="'+c+'_embeddedbi" class="pinBoardDbrd"></div ></div>'),this.pinBoardRendered=!1,this.pinboardIds.push({widgetId:s.Item[0].Id,pinboardContainerId:c}),this.loadDashboardWidget(s.Item[0].Id,s.Item[0].ItemId),this.enableSorting(),this.setListMinimumHeight(),this._removeElementsClass(this.embedOptions.embedContainerId,".preloader-wrap","viewer-blue-loader")}_tabSelected(){const e=window.bbEmbed(".multitab-dbrd").attr("id");for(let t=0;t<window.bbEmbed("#"+e+" .e-toolbar-item").length;t++)if(window.bbEmbed(".e-content").find("#e-content-"+e+"_"+t).attr("style","display:block !important"),window.bbEmbed("#"+e+" .e-toolbar-item.e-active").attr("aria-controls")=="e-content-"+e+"_"+t){window.bbEmbed(window.bbEmbed(".e-content").find("#e-content-"+e+"_"+t).children()).css({display:"block",position:"absolute",left:0});const i=window.bbEmbed("#"+window.bbEmbed(window.bbEmbed(".e-content").find("#e-content-"+e+"_"+t).children()).children().attr("id")).data("BoldBIDashboardDesigner");if(null==i||null==i){const i=window.bbEmbed(".e-content").find("#e-content-"+e+"_"+t).children().attr("id").split("_")[1],n={Apistatus:!0,Data:this.dashboardDetails[`${i}`],Status:!0};this._renderDashboard(n)}}else window.bbEmbed(window.bbEmbed(".e-content").find("#e-content-"+e+"_"+t).children()).css({display:"block",position:"absolute",left:window.bbEmbed(".e-content.e-lib.e-touch").width()*(t+1)})}_isDependencyLoaded(e,t){window.bbEmbed instanceof Function&&window.BoldBIDashboard instanceof Object&&!e._isNullOrUndefined(window.BoldBIDashboard)&&window.BoldBIDashboard.Designer instanceof Object&&window.BoldBIDashboardDesigner instanceof Function&&!e._isEmptyOrSpaces(e.designerRootUrl)&&window.Designer instanceof Object?(e.IsDependencyLoaded||(e.IsDependencyLoaded=!0),e._getAuthorizationToken(t)):setTimeout(e._isDependencyLoaded,500,e)}_getDashboardInstance(e){const t=window.bbEmbed.call(this,"#"+(e||this.childContainer.id))[0];if(t)return window.bbEmbed.data.call(this,t,"BoldBIDashboardDesigner")}_onBoldBIDashboardInstaceActionBegin(e,t){if(this.isMultiTab&&0==parseInt(i(".e-content .e-active").attr("id").split("_")[i(".e-content .e-active").attr("id").split("_").length-1],10)){const e=i(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner");this.setDefaultTheme(e.modules.themeHelper.getBannerBackground(),e.modules.themeHelper.getBannerTextColor(),e.modules.themeHelper.getBannerIconColor())}void 0!==e&&"renderLayout"===e.eventType&&this._removeElementsClass(t,".preloader-wrap","viewer-blue-loader");const n=window[this.actionBeginFn];n instanceof Function&&n.call(this,e);const s=window[this.embedOptions.actionBegin];if(s instanceof Function&&s.call(this,e),this.embedOptions.actionBegin instanceof Function&&this.embedOptions.actionBegin.call(this,e),"dataSourceSaveAction"==e.eventType&&this._onBoldBIBeforeDatasourceSaveAction(e),"filterInteraction"==e.eventType){const t=window[this.embedOptions.beforeFilterApply];t instanceof Function&&t.call(this,e),this.embedOptions.beforeFilterApply instanceof Function&&this.embedOptions.beforeFilterApply.call(this,e)}if("publishAsAction"==e.eventType){const t=window[this.embedOptions.dashboardSettings.beforePublishAs];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.beforePublishAs instanceof Function&&this.embedOptions.dashboardSettings.beforePublishAs.call(this,e)}}_onBoldBIDashboardInstaceActionComplete(e){const t=this;let n;const o=window[this.actionCompleteFn];if(this._isNullOrUndefined(e.data)||("createConnection"==e.data.event&&(this.embedOptions.datasourceId=e.data.source.data,this.embedOptions.mode=s.Mode.DataSource,this.isNewConnection=!0,t._isEmptyOrSpaces(t.embedOptions.authorizationServer.url)?(n={embed_datasource_id:t.embedOptions.datasourceId,embed_mode:t.embedOptions.mode},i.ajax({async:!1,type:"POST",url:t.dashboardServerApiUrl+this.embedGetDetailsEndPoint,headers:{Authorization:"Bearer "+t.accessToken},data:JSON.stringify(n),contentType:"application/json",success:i.proxy(t._renderDashboard,t)})):this._getAuthorizationToken()),"cancelDataSource"==e.data.event&&(this.embedOptions.mode=s.Mode.Connection,t._isEmptyOrSpaces(t.embedOptions.authorizationServer.url)?(n={embed_mode:t.embedOptions.mode},i.ajax({async:!1,type:"POST",url:t.dashboardServerApiUrl+this.embedGetDetailsEndPoint,headers:{Authorization:"Bearer "+t.accessToken},data:JSON.stringify(n),contentType:"application/json",success:i.proxy(t._renderDashboard,t)})):this._getAuthorizationToken())),this.pinboardIds.length>0&&"renderWidget"===e.eventType&&(0===e.source.element.find(".bbi-dbrd-control-header .bbi-dbrd-control-title-wrapper").length?(e.source.element.parents(".widget").find("#widget-icons").css("margin-top","8px"),e.source.element.attr("data-name").toLowerCase().includes("card")&&e.source.element.find(".bbi-dbrd-control").css("top","20px")):(e.source.element.find(".bbi-dbrd-control-header").css("margin-left","-8px"),e.source.element.find(".bbi-dbrd-control-title-wrapper").css("margin-left","8px"))),"interactionCompleted"==e.eventType){n={filterData:this._getFilterData(e.source.data.encryptedData),data:e};const t=window[this.embedOptions.dashboardSettings.onInteraction];t instanceof Function&&t.call(this,n),this.embedOptions.dashboardSettings.onInteraction instanceof Function&&this.embedOptions.dashboardSettings.onInteraction.call(this,e)}else{o instanceof Function&&o.call(this,e);const t=window[this.embedOptions.actionComplete];t instanceof Function&&t.call(this,e),this.embedOptions.actionComplete instanceof Function&&this.embedOptions.actionComplete.call(this,e)}if("filterInteraction"==e.eventType){const t=window[this.embedOptions.afterFilterApply];t instanceof Function&&t.call(this,e),this.embedOptions.afterFilterApply instanceof Function&&this.embedOptions.afterFilterApply.call(this,e)}"dataSourceSaveAction"==e.eventType&&JSON.parse(e.schema.schema).length>0&&this._onBoldBIAfterDatasourceSaveAction(e)}_onBoldBIBeforeDatasourceSaveAction(e){const t=window[this.embedOptions.beforeDatasourceSave];t instanceof Function&&t.call(this,e),this.embedOptions.beforeDatasourceSave instanceof Function&&this.embedOptions.beforeDatasourceSave.call(this,e)}_onBoldBIAfterDatasourceSaveAction(e){const t=window[this.embedOptions.afterDatasourceSave];t instanceof Function&&t.call(this,e),this.embedOptions.afterDatasourceSave instanceof Function&&this.embedOptions.afterDatasourceSave.call(this,e)}_onBoldBIDashboardBeforeBannerIconRender(e){const t=e.iconsinformation.shift(),n=e.iconsinformation.shift(),s=e.iconsinformation.shift();if((0==this.embedOptions.dashboardSettings.showMoreOption||0==this.embedOptions.dashboardSettings.showExport||0==this.embedOptions.exportSettings.showExcel&&0==this.embedOptions.exportSettings.showImage&&0==this.embedOptions.exportSettings.showPDF)&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"groupName","Option")),0==this.embedOptions.dashboardSettings.showDashboardParameter)for(let e=n.items.length-1;e>=0;e--)this._isNullOrUndefined(n.items[`${e}`])||"dashboardparameters"!=n.items[`${e}`][0].dataset.name||n.items.splice(e,1);0==this.embedOptions.dashboardSettings.showRefresh&&s.items.splice(0,1);const o=window[this.beforeBannerIconRenderFn];if(this.embedOptions.dashboardSettings.enableFullScreen){const t={groupId:"refresh-fullscreen",groupName:"Refresh & FullScreen",enableGroupSeperator:!0,items:[this._createBannerIcon("<div/>","dashboard-refresh","e-dbrd-banner-refresh","Refresh","refreshdashboard",!0,!1,{display:"none","font-size":"14px"}),this._createBannerIcon("<div/>","dashboard-fullscreen",this.isFullscreen?"su su-minimize":"su su-maximize-1","Fullscreen","fullscreen",!0,!1,{"font-size":"14px"})]};e.iconsinformation.unshift(t)}s.items.length>0&&(e.iconsinformation.unshift(s),e.iconsinformation[0].enableGroupSeperator=!this.embedOptions.dashboardSettings.enableFullScreen),n.items.length>0&&e.iconsinformation.unshift(n),t.items.length>0&&e.iconsinformation.unshift(t),o instanceof Function&&o.call(this,e);const a=window[this.embedOptions.dashboardSettings.beforeIconRender];a instanceof Function&&a.call(this,e),this.embedOptions.dashboardSettings.beforeIconRender instanceof Function&&this.embedOptions.dashboardSettings.beforeIconRender.call(this,e),i('<style type="text/css"> #dashboard-refresh { display: none !important} </style>').appendTo("head")}_createBannerIcon(e,t,n,s,o,a,d,r,l){return i(e,d?{id:t,html:i("<span/>",{class:"icon-with-label",text:s,css:{"font-family":"Roboto",padding:"10px"}}),class:"server-banner-icon e-dashboard-banner-icon bbi-dbrd-designer-hoverable "+n,"data-name":o,"data-event":a,href:l,css:r}:{id:t,class:"server-banner-icon e-dashboard-banner-icon bbi-dbrd-designer-hoverable "+n,"data-tooltip":s,"data-name":o,"data-event":a,css:r})}_onBoldBIDashboardBeforeOtherOptionContextMenuRender(e){0==this.embedOptions.dashboardSettings.showExport&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"groupName","export")),e.iconsinformation.forEach(function(e){"export"==e.groupName&&(0==this.embedOptions.exportSettings.showExcel&&(e.items[0].child=this._arraySlice(e.items[0].child,"id","excel")),0==this.embedOptions.exportSettings.showImage&&(e.items[0].child=this._arraySlice(e.items[0].child,"id","image")),0==this.embedOptions.exportSettings.showPDF&&(e.items[0].child=this._arraySlice(e.items[0].child,"id","pdf")),0==this.embedOptions.exportSettings.showCSV&&(e.items[0].child=this._arraySlice(e.items[0].child,"id","csv")))}.bind(this));const t=window[this.beforeOtherRenderFn];t instanceof Function&&t.call(this,e);const i=window[this.embedOptions.beforeContextMenuRender];i instanceof Function&&i.call(this,e),this.embedOptions.beforeContextMenuRender instanceof Function&&this.embedOptions.beforeContextMenuRender.call(this,e)}_onBoldBIDashboardSaveFilter(e){const t=this,n=window[t.onSaveFilterFn];n instanceof Function&&n.call(t,e);const s=window[t.embedOptions.dashboardSettings.onSaveFilter];if(s instanceof Function&&s.call(t,e),t.embedOptions.dashboardSettings.onSaveFilter instanceof Function&&t.embedOptions.dashboardSettings.onSaveFilter.call(t,e),!1===e.cancel)if(""==t.embedOptions.dashboardId)console.error("Please provide DashboardId in BoldBI.Create().");else{i("body").find("#save_view_dialog_wrapper").remove();const n=t.isMultiTab?t._getActiveChildDashboardId():t.embedOptions.dashboardId;if(e.viewId){const i={ViewId:e.viewId,DashboardId:n,QueryString:e.data.encryptedData};t.updateFilterView(i,(function(e,t){alert(t+" and you can add custom functionalities using viewId: "+e.ViewId)}))}else t._createSaveViewDialog(e)}}_addSaveViewDialogStyles(){i('<style type="text/css">                     #save_view_dialog_header .su-view { float: left; padding-top: 5px; padding-right: 5px; font-size: 14px; color: var(--primary-text-normal-color); }                     #save_view_dialog_content { font-size: 12px; line-height: 1.4; }                     #save_view_dialog_header #save_view_dialog_header_title { color: var(--primary-text-normal-color); font-size: 14px; padding-top: 5px; line-height: 15px; }                     #view_name_left_col { width: 25%; font-size: 13px; float: left; text-align: right; margin: 5px 0px; }                     #view_name_right_col { width: 61%; float: left; margin-left: 50px; }                     #view_name_textbox { width: 100%; border: 1px solid var(--secondary-border-color); padding: 6px 12px; color: var(--primary-text-normal-color); background: var(--primary-background-color); font-size: 12px; }                     #view_name_textbox:focus { border-color: var(--primary-branding-border-color)!important; }                     #cancel_button:hover { background: var(--secondary-btn-bg-hover-color); border: 1px solid var(--secondary-btn-border-normal-color); color: var(--secondary-btn-text-hover-color); }                     #save_button:hover { background: var(--primary-btn-bg-hover-color); border: 1px solid var(--primary-btn-border-normal-color); color: var(--primary-btn-text-hover-color) !important; }                     #save_view_dialog_footer { padding: 10px 15px; border-top: 1px solid var(--secondary-border-color); background: var(--secondary-background-color); }                     #save_view_dialog .e-dlg-closeicon-btn { margin-right: 5px; padding: 5px 0px; width: 15px; height: 20px; }                     #save_view_dialog .e-dlg-closeicon-btn .e-icon-dlg-close { font-size: 10px; color: var(--hyper-link-hover-color); }                     #save_view_dialog .e-dlg-closeicon-btn:hover, #save_view_dialog .e-dlg-closeicon-btn { background: var(--primary-background-color); }                     #save_view_dialog .e-dlg-content { background: var(--primary-background-color); color: var(--primary-text-normal-color); padding-bottom: 25px; }                     #view_name_err_msg { display: none; color: #ff3b30; font-size: 12px; }                     #cancel_button { background: var(--secondary-btn-bg-normal-color); border: 1px solid var(--secondary-btn-border-normal-color); color: var(--secondary-text-normal-color); }                     #save_button { margin-right: 15px; background: var(--primary-btn-bg-normal-color); border: 1px solid var(--primary-btn-border-normal-color); color: var(--primary-btn-text-normal-color); }                     #save_view_dialog .e-dlg-header-content { padding: 10px 15px; height: 40px; background: var(--primary-background-color); color: var(--primary-text-normal-color); }                     #save_view_dialog { background: var(--primary-background-color); }                     .footer-button-class { border-radius: 4px; display: inline-block; cursor: pointer; font-size: 12px; float: right; font-weight: 600; height: 32px; line-height: 18px; min-width: 90px; outline: 0; text-align: center; padding: 6px 20px; }                     .e-dlg-overlay { position: fixed; }                     .viewname-textbox-error { border: 1px solid #ff3b30 !important; }                 </style > ').appendTo("head")}_createSaveViewDialog(e){const t=this;t._addSaveViewDialogStyles();const n=i("<div>").attr("id","save_view_dialog_wrapper").appendTo("body"),s=i("<div>").attr("id","save_view_dialog").appendTo(n),o=`\n            <div id='save_view_dialog_content'>\n                <label id='view_name_left_col'>Name*</label>\n                <div id='view_name_right_col'>\n                    <input type='text' id='view_name_textbox' data-query='${e.data.encryptedData}' data-id='${e.viewId}'>\n                    <span id='view_name_err_msg'></span>\n                </div>\n            </div>\n        `,a=i("<div>").attr("id","save_view_dialog_footer"),d=i("<button>").attr("id","save_button").addClass("footer-button-class").text("Save").on("click",(()=>t._saveFilterView(t))),r=i("<button>").attr("id","cancel_button").addClass("footer-button-class").text("Cancel").on("click",(function(){i("body").find("#save_view_dialog_wrapper, #success_save_view_dialog_wrapper").remove()}));a.append(r),a.append(d),s.append(a),new window.ejdashboard.popups.Dialog({header:'<div id="save_view_dialog_header"><span class="su su-view"></span><div id="save_view_dialog_header_title">Save View</div></div>',width:"600px",isModal:!0,showCloseIcon:!0,target:n[0],content:o}).appendTo("#save_view_dialog"),document.addEventListener("input",(function(){t._viewNameValidation(!1)}))}_saveFilterView(e){const t=e,n=i("#view_name_textbox")[0];if(t._viewNameValidation(!1)){const e=t.isMultiTab?t._getActiveChildDashboardId():"",s=n.value,o=n.getAttribute("data-query"),a=n.getAttribute("data-id"),d={ViewName:s,ItemId:t.embedOptions.dashboardId,QueryString:o,ChildItemId:e},r=e=>{e?(i("body").find("#save_view_dialog_wrapper").remove(),t.updateInFilterOverviewUI(e)):t._viewNameValidation(!0)};"null"===a?t.saveFilterView(d,r):t.saveAsFilterView(d,r)}}_viewNameValidation(e){const t=i("#view_name_textbox"),n=i("#view_name_err_msg"),s=/^[a-zA-Z0-9!@$^ ()_=\-}{.`~]*$/.test(t.val()),o=""===t.val();return e||!s||o?(n.css("display","block").text(e?"View Name Already Exists":s?o?"Please enter the view name":"":"Please avoid special characters"),t.addClass("viewname-textbox-error"),!1):(n.css("display","none").text(),t.removeClass("viewname-textbox-error"),!0)}_getActiveChildDashboardId(){return window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner")._id.split("_")[1].replace(/^([\da-f]{8})([\da-f]{4})([\da-f]{4})([\da-f]{4})([\da-f]{12})$/,"$1-$2-$3-$4-$5")}_getParametersFromQueryString(e){return JSON.parse(decodeURIComponent(e).split("filterQuery=")[1]).map((e=>({name:e.dimfi&&!e.dimfi.c.toLowerCase().includes("include")?`${e.cn} (${e.dimfi.c})`:e.cn,values:e.dimfi?e.dimfi.t:e.idf.dfl})))}_onBoldBIDashboardSaveAsFilter(e){const t=window[this.onSaveAsFilterFn];t instanceof Function&&t.call(this,e);const n=window[this.embedOptions.dashboardSettings.onSaveAsFilter];n instanceof Function&&n.call(this,e),this.embedOptions.dashboardSettings.onSaveAsFilter instanceof Function&&this.embedOptions.dashboardSettings.onSaveAsFilter.call(this,e),!1===e.cancel&&(""==this.embedOptions.dashboardId?console.error("Please provide DashboardId in BoldBI.create()."):(i("body").find("#save_view_dialog_wrapper").remove(),this._createSaveViewDialog(e)))}_onBoldBIDashboardOpenViewSection(e){const t=this,i=window[t.onViewSavedFiltersFn];i instanceof Function&&i.call(t,e);const n=window[t.embedOptions.dashboardSettings.onViewSavedFilters];n instanceof Function&&n.call(t,e),t.embedOptions.dashboardSettings.onViewSavedFilters instanceof Function&&t.embedOptions.dashboardSettings.onViewSavedFilters.call(t,e)}_onBoldBIDashboardBannerIconClick(e){if("fullscreen"==e.name.toLowerCase()&&this._switchFullscreenMode(e),"refreshdashboard"==e.name.toLowerCase()&&(this.isMultiTab?window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner").updateDashboard():this._getDashboardInstance().updateDashboard()),"dashboardparameters"==e.name.toLowerCase()){const e=document.createElement("style");e.innerHTML=".remove-scroller-dashboard-parameter { width: 100% !important; height: 100% !important; color: #333; background: #fff; border-radius: 0; }",document.head.appendChild(e);const t=this;setTimeout((function(){const e=t.isMultiTab?window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner"):t._getDashboardInstance();i("#"+e._id+"_dashboardparameter_dialog").addClass("remove-scroller-dashboard-parameter")}),50)}const t=window[this.onBannerIconClickFn];t instanceof Function&&t.call(this,e);const n=window[this.embedOptions.dashboardSettings.onIconClick];if(n instanceof Function&&n.call(this,e),this.embedOptions.dashboardSettings.onIconClick instanceof Function&&this.embedOptions.dashboardSettings.onIconClick.call(this,e),void 0!==e.name&&"theming"==e.name.toLowerCase()){let t;if(this.isMultiTab){this.multiTabTheme=e.selectedTheme;const t=window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner");t.applyDashboardTheme(e.selectedTheme),this.setDefaultTheme(t.modules.themeHelper.getBannerBackground(),t.modules.themeHelper.getBannerTextColor(),t.modules.themeHelper.getBannerIconColor());const i=window.bbEmbed("#"+this.embedOptions.embedContainerId).find(".e-content .bbembed-multitab-dbrd");for(let t=0;t<i.length;t++)if(window.bbEmbed(window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd")).attr("id")!=window.bbEmbed(i[`${t}`]).attr("id")){const n=window.bbEmbed(i[`${t}`]).attr("id"),s=this._getDashboardInstance(n);null!=s&&s.applyDashboardTheme(e.selectedTheme)}}else this._getDashboardInstance(t).applyDashboardTheme(e.selectedTheme)}}getComments(e,t,n){const s=this,o={ItemId:"dashboard"==e?t.dashboardId:t.widgetId,DashboardItemId:"dashboard"==e&&this.isMultiTab?t.multitabDashboardId:t.dashboardId,ItemType:e,ParentItemId:this.isMultiTab?t.multitabDashboardId:null,CommentAction:3,OrderBy:1};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(o){if(o.Status)if("dashboard"==e)s.commentsArgs.Comments=o.Comments,s.commentsArgs.ActiveCommentsCount=o.ActiveCommentsCount,s.commentsArgs.SortBy=1,s.commentsArgs.DashboardId=o.ItemId,window[`${n}`]instanceof Function?window[`${n}`].call(s,s.commentsArgs):n.call(s,s.commentsArgs);else if("widget"==e){const e=i("[data-widget-id="+t.widgetId+"]"),a=e[0].id,d=i("#"+a).width(),r=e.offset().left+d,l=e.offset().top;let h=i(window).width()-(r+350);h<0&&(h=i(window).width()-(r-(i(window).width()<450?0:75)),i(window).width()<375&&(h=0)),s.commentsArgs.Comments=o.Comments,s.commentsArgs.Position={top:l+20,right:h+40},s.commentsArgs.ActiveCommentsCount=o.ActiveCommentsCount,s.commentsArgs.SortBy=1,s.commentsArgs.WidgetId=t.widgetId,s.commentsArgs.DashboardId=t.dashboardId,window[`${n}`]instanceof Function?window[`${n}`].call(s,s.commentsArgs):n.call(s,s.commentsArgs)}},error:function(e){s.ajaxErrorFnc(e)}})}addDashboardComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId),d=!e.parentCommentId||!!Number(e.parentCommentId);if(o&&a&&d&&!this._isEmptyOrSpaces(e.content)){const s=(new Date).toISOString(),o={ItemType:"dashboard",Comment:e.content,ItemId:e.dashboardId,ParentId:e.parentCommentId,ParentItemId:e.multitabDashboardId,CommentAction:0,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&n.getComments("dashboard",e,t)},error:function(e){n.ajaxErrorFnc(e)}})}else o&&a?d?this._isEmptyOrSpaces(e.content)&&console.error("Please provide valid comment text."):console.error("Please provide a valid reply comment Id."):console.error("Please provide valid dashboard ID.")}addWidgetComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=s.exec(e.widgetId),d=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId),r=!e.parentCommentId||!!Number(e.parentCommentId);if(a&&o&&d&&r&&!this._isEmptyOrSpaces(e.content)){const s=(new Date).toISOString(),o={ItemType:"widget",Comment:e.content,ItemId:e.widgetId,DashboardItemId:e.dashboardId,ParentId:e.parentCommentId,ParentItemId:e.multitabDashboardId,CommentAction:0,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&n.getComments("widget",e,t)},error:function(e){n.ajaxErrorFnc(e)}})}else o&&d&&a?r?this._isEmptyOrSpaces(e.content)&&console.error("Please provide valid comment text."):console.error("Please provide a valid reply comment Id."):console.error("Please provide valid dashboard or widget ID.")}deleteDashboardComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId);if(o&&a&&!this._isEmptyOrSpaces(e.commentId)){const s=(new Date).toISOString(),o={ItemType:"dashboard",CommentId:e.commentId,ItemId:e.dashboardId,ParentItemId:e.multitabDashboardId,CommentAction:2,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&n.getComments("dashboard",e,t)},error:function(e){n.ajaxErrorFnc(e)}})}else o&&a?this._isEmptyOrSpaces(e.commentId)&&console.error("Please provide a valid comment Id."):console.error("Please provide valid dashboard ID.")}deleteWidgetComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=s.exec(e.widgetId),d=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId);if(a&&o&&d&&!this._isEmptyOrSpaces(e.commentId)){const s=(new Date).toISOString(),o={ItemType:"widget",CommentId:e.commentId,ItemId:e.widgetId,DashboardItemId:e.dashboardId,ParentItemId:e.multitabDashboardId,CommentAction:2,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&n.getComments("widget",e,t)},error:function(e){n.ajaxErrorFnc(e)}})}else o&&d&&a?this._isEmptyOrSpaces(e.commentId)&&console.error("Please provide a valid comment Id."):console.error("Please provide valid dashboard or widget ID.")}editDashboardComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId);if(o&&a&&!this._isEmptyOrSpaces(e.content)&&!this._isEmptyOrSpaces(e.commentId)){const s=(new Date).toISOString(),o={ItemType:"dashboard",Comment:e.content,CommentId:e.commentId,ItemId:e.dashboardId,ParentItemId:e.multitabDashboardId,CommentAction:1,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&n.getComments("dashboard",e,t)},error:function(e){n.ajaxErrorFnc(e)}})}else o&&a?this._isEmptyOrSpaces(e.commentId)?console.error("Please provide a valid comment Id."):this._isEmptyOrSpaces(e.content)&&console.error("Please provide valid comment text."):console.error("Please provide valid dashboard ID.")}editWidgetComment(e,t){const n=this,s=/^(?:\{{0,1}(?:[0-9a-fA-F]){8}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){4}-(?:[0-9a-fA-F]){12}\}{0,1})$/,o=s.exec(e.dashboardId),a=s.exec(e.widgetId),d=!e.multitabDashboardId||!!s.exec(e.multitabDashboardId);if(a&&o&&d&&!this._isEmptyOrSpaces(e.content)&&!this._isEmptyOrSpaces(e.commentId)){const s=(new Date).toISOString(),o={ItemType:"widget",Comment:e.content,CommentId:e.commentId,ItemId:e.widgetId,DashboardItemId:e.dashboardId,ParentItemId:e.multitabDashboardId,CommentAction:1,CurrentDate:s,Url:this.dashboardUrl};i.ajax({async:!1,type:"POST",url:this.dashboardServerApiUrl+"/comments/operation",headers:{Authorization:"bearer "+this.accessToken},data:JSON.stringify(o),contentType:"application/json",success:function(i){i.Status&&(n.commentsArgs.StatusMessage=i.StatusMessage,n.getComments("widget",e,t))},error:function(e){n.ajaxErrorFnc(e)}})}else o&&d&&a?this._isEmptyOrSpaces(e.commentId)?console.error("Please provide a valid comment Id."):this._isEmptyOrSpaces(e.content)&&console.error("Please provide valid comment text."):console.error("Please provide valid dashboard or widget ID.")}ajaxErrorFnc(e){let t="";t=0==e.status?"Not connected. Please check the network.":404==e.status?"The requested page was not found (404).":500==e.status?"There is an Internal Server Error (500).":"Uncaught Error occurred."+e.responseText,console.error(t)}setDefaultTheme(e,t,n){i(".e-tab-header.e-control.e-toolbar.e-lib.e-keyboard").css("color",n),i(".e-toolbar-item .e-tab-text").css("color",t),i(".e-toolbar-item.e-active .e-tab-text").addClass("active-font-color"),i(".multitab-dbrd").css("background",e),i(".e-items.e-toolbar-items.e-lib.e-hscroll.e-control.e-touch .e-nav-arrow").css("color",n)}_switchFullscreenMode(e){const t=document.getElementById(e.target.parent().attr("id").split("_embeddedbi")[0]);this.isFullscreen=!1,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):"ActiveXObject"in window&&(new ActiveXObject("Wscript.shell").SendKeys("{F11}"),setTimeout((function(){(screen.availHeight||screen.height-30)<=window.innerHeight?(i('<style id="embed-fullscreen" type="text/css"> .hide-dashboard-icons #dashboard-refresh {  display: block !important; } .hide-dashboard-icons ul.options, .hide-dashboard-icons .su-pin, .hide-dashboard-icons .su-edit, .hide-dashboard-icons .bbi-dbrd-banner-link, .hide-dashboard-icons .bbi-dbrd-banner-menu, .hide-dashboard-icons .bbi-dbrd-banner-text-icon, .hide-dashboard-icons .bbi-dbrd-banner-widget-withoutcomments, .hide-dashboard-icons .bbi-dbrd-banner-widget-withcomments, .hide-dashboard-icons .bbi-dbrd-control-menu, .hide-dashboard-icons .e-dashboard-banner-menu, .hide-dashboard-icons .e-dashboard-banner-link, .hide-dashboard-icons .su-icon, .hide-dashboard-icons .bbi-dbrd-control-menu-icon, .hide-dashboard-icons .e-dashboard-banner-icon:not(#dashboard-fullscreen):not(#dashboard-refresh):not(#pinboard-fullscreen), .hide-dashboard-icons .e-dashboard-banner-description, .hide-dashboard-icons .server-banner-icon + .e-banner-verticalsplitline, .hide-dashboard-icons #dashboard_bannerPanel div a + .e-banner-verticalsplitline, .hide-dashboard-icons .bbi-dashboard-widget-menu { display: none !important; } .hide-dashboard-icons #dashboard { width: 100% !important; } .hide-embed-dashboard-icons .bbi-dbrd-banner-link, .hide-embed-dashboard-icons .bbi-dbrd-banner-menu, .hide-embed-dashboard-icons .bbi-dbrd-banner-text-icon, .hide-embed-dashboard-icons .bbi-dbrd-banner-widget-withoutcomments, .hide-embed-dashboard-icons .bbi-dbrd-banner-widget-withcomments, .hide-embed-dashboard-icons .bbi-dbrd-control-menu, .hide-embed-dashboard-icons .e-dashboard-banner-menu, .hide-embed-dashboard-icons .e-dashboard-banner-link, .hide-embed-dashboard-icons .e-dashboard-banner-icon:not(#dashboard-fullscreen):not(#dashboard-refresh):not(#dashboard_otheroption):not(#dashboard-view):not(#dashboard-comment):not(#dashboard_dashboardmenu), .hide-embed-dashboard-icons #dashboard_bannerPanel div a + .e-banner-verticalsplitline, .hide-embed-dashboard-icons .saved-view .su.cursor-pointer { display: none !important; } </style>').appendTo("head"),i("body").addClass("hide-dashboard-icons"),i("#dashboard-fullscreen").removeClass("su-maximize-1").addClass("su-minimize").attr("data-tooltip","Exit Fullscreen")):(i("#embed-fullscreen").remove(),i("body").removeClass("hide-dashboard-icons"),this.isMultiTab&&i("#"+this.embedOptions.embedContainerId).find(".multitab-dbrd").css("width",this.embedOptions.width),i("#dashboard-fullscreen").addClass("su-maximize-1").removeClass("su-minimize").attr("data-tooltip","Fullscreen"))}),400))}_fullscreenExitHandler(e){if(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement){this.isFullscreen=!0;const t=0!=this.embedOptions.dashboardSettings.showRefresh?"block !important":"none !important";i('<style id="embed-fullscreen" type="text/css"> .hide-dashboard-icons #dashboard-refresh { display:'+t+"; } .hide-dashboard-icons ul.options, .hide-dashboard-icons .su-pin, .hide-dashboard-icons .su-edit, .hide-dashboard-icons .bbi-dbrd-banner-link, .hide-dashboard-icons .bbi-dbrd-banner-menu, .hide-dashboard-icons .bbi-dbrd-banner-text-icon, .hide-dashboard-icons .bbi-dbrd-banner-widget-withoutcomments, .hide-dashboard-icons .bbi-dbrd-banner-widget-withcomments, .hide-dashboard-icons .bbi-dbrd-control-menu, .hide-dashboard-icons .e-dashboard-banner-menu, .hide-dashboard-icons .e-dashboard-banner-link, .hide-dashboard-icons .su-icon, .hide-dashboard-icons .e-dashboard-banner-icon:not(#dashboard-fullscreen):not(#dashboard-refresh):not(#pinboard-fullscreen), .hide-dashboard-icons .e-dashboard-banner-description, .hide-dashboard-icons .server-banner-icon + .e-banner-verticalsplitline, .hide-dashboard-icons #dashboard_bannerPanel div a + .e-banner-verticalsplitline, .hide-dashboard-icons .bbi-dashboard-widget-menu { display: none !important; } .hide-dashboard-icons #dashboard { width: 100% !important; } .hide-embed-dashboard-icons .bbi-dbrd-banner-link, .hide-embed-dashboard-icons .bbi-dbrd-banner-menu, .hide-embed-dashboard-icons .bbi-dbrd-banner-text-icon, .hide-embed-dashboard-icons .bbi-dbrd-banner-widget-withoutcomments, .hide-embed-dashboard-icons .bbi-dbrd-banner-widget-withcomments, .hide-embed-dashboard-icons .e-dashboard-banner-menu, .hide-embed-dashboard-icons .e-dashboard-banner-link, .hide-embed-dashboard-icons .e-dashboard-banner-icon:not(#dashboard-fullscreen):not(#dashboard-refresh):not(#dashboard_otheroption):not(#dashboard-view):not(#dashboard-comment):not(#dashboard_dashboardmenu), .hide-embed-dashboard-icons #dashboard_bannerPanel div a + .e-banner-verticalsplitline, .hide-embed-dashboard-icons .saved-view .su.cursor-pointer { display: none !important; } </style>").appendTo("head"),i("body").addClass("hide-dashboard-icons"),e.isMultiTab?i("#"+e.embedOptions.embedContainerId).find(".multitab-dbrd .e-content .e-active").find("#dashboard-fullscreen").removeClass("su-maximize-1").addClass("su-minimize").attr("data-tooltip","Exit Fullscreen"):i("#dashboard-fullscreen").removeClass("su-maximize-1").addClass("su-minimize").attr("data-tooltip","Exit Fullscreen"),i("#pinboard-fullscreen").removeClass("su-maximize-1").addClass("su-minimize").attr("data-tooltip","Exit Fullscreen"),i("#server-app-container").attr("style","background-color: #f9f9f9; overflow: auto !important")}else i("#embed-fullscreen").remove(),i("body").removeClass("hide-dashboard-icons"),e.isMultiTab?(i("#"+e.embedOptions.embedContainerId).find(".multitab-dbrd").css("width","100%"),i("#"+e.embedOptions.embedContainerId).find(".multitab-dbrd .e-content .e-active").find("#dashboard-fullscreen").addClass("su-maximize-1").removeClass("su-minimize").attr("data-tooltip","Fullscreen")):i("#dashboard-fullscreen").addClass("su-maximize-1").removeClass("su-minimize").attr("data-tooltip","Fullscreen"),i("#pinboard-fullscreen").addClass("su-maximize-1").removeClass("su-minimize").attr("data-tooltip","Fullscreen"),i("#server-app-container").attr("style","background-color: #f9f9f9; height:"+i("#content-area").height()+"px;overflow: hidden !important;min-height: 600px; width:"+e.embedOptions.width)}_onBoldBIDashboardBeforeWidgetIconRendered(e){0==this.embedOptions.widgetSettings.showMaximize&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"name","maximize")),0==this.embedOptions.widgetSettings.showFilter&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"name","filter")),(0==this.embedOptions.widgetSettings.showExport||0==this.embedOptions.exportSettings.showExcel&&0==this.embedOptions.exportSettings.showImage&&0==this.embedOptions.exportSettings.showPDF&&0==this.embedOptions.exportSettings.showCSV)&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"name","export"),this._isNullOrUndefined(e.widgetInformation)||this._isNullOrUndefined(e.widgetInformation.widgetJson)||this._isNullOrUndefined(e.widgetInformation.widgetJson.ContainerSettings)||e.widgetInformation.widgetJson.ContainerSettings.ViewData||(e.iconsinformation=this._arraySlice(e.iconsinformation,"name","menu"))),0==this.embedOptions.widgetSettings.showMoreOption&&(e.iconsinformation=this._arraySlice(e.iconsinformation,"name","menu"));const t=window[this.beforeWidgetIconRenderedFn];t instanceof Function&&t.call(this,e);const i=window[this.embedOptions.widgetSettings.beforeIconRender];i instanceof Function&&i.call(this,e),this.embedOptions.widgetSettings.beforeIconRender instanceof Function&&this.embedOptions.widgetSettings.beforeIconRender.call(this,e)}_onBoldBIBeforeControlMenuOpen(e){(0==this.embedOptions.widgetSettings.showExport||0==this.embedOptions.exportSettings.showExcel&&0==this.embedOptions.exportSettings.showCSV&&0==this.embedOptions.exportSettings.showImage&&0==this.embedOptions.exportSettings.showPDF)&&(e.menuItems=this._arraySlice(e.menuItems,"id","export"));const t=window[this.embedOptions.widgetSettings.beforeWidgetControlMenuOpen];t instanceof Function&&t.call(this,e),this.embedOptions.widgetSettings.beforeWidgetControlMenuOpen instanceof Function&&this.embedOptions.widgetSettings.beforeWidgetControlMenuOpen.call(this,e)}_onBoldBIBeforeDashboardMobileMenuOpen(e){if(0==this.embedOptions.dashboardSettings.showDashboardParameter||0==this.embedOptions.dashboardSettings.showRefresh||0==this.embedOptions.dashboardSettings.showExport)for(let t=e.menuItems.length-1;t>=0;t--)(0==this.embedOptions.dashboardSettings.showDashboardParameter&&"dashboardparameters"==e.menuItems[`${t}`].id||0==this.embedOptions.dashboardSettings.showRefresh&&"refreshDashboard"==e.menuItems[`${t}`].id||0==this.embedOptions.dashboardSettings.showExport&&"export"==e.menuItems[`${t}`].id)&&e.menuItems.splice(t,1);const t=window[this.embedOptions.beforeDashboardMobileMenuOpen];t instanceof Function&&t.call(this,e),this.embedOptions.beforeDashboardMobileMenuOpen instanceof Function&&this.embedOptions.beforeDashboardMobileMenuOpen.call(this,e)}_onBoldBIAjaxBeforeLoad(e){const t=window[this.embedOptions.ajaxBeforeLoad];t instanceof Function&&t.call(this,e),this.embedOptions.ajaxBeforeLoad instanceof Function&&this.embedOptions.ajaxBeforeLoad.call(this,e)}_onBoldBIbeforeDesignerToolbarButtonsRendered(e){const t=window[this.embedOptions.dashboardSettings.beforeDesignerToolbarButtons];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.beforeDesignerToolbarButtons instanceof Function&&this.embedOptions.dashboardSettings.beforeDesignerToolbarButtons.call(this,e)}_onBoldBIbeforeDatasourceToolbarButtonsRendered(e){for(let t=e.toolbarButtons.length-1;t>=0;t--)this.isNewConnection||this.embedOptions.mode==s.Mode.Design?e.toolbarButtons[`${t}`].elementId==this.embedOptions.embedContainerId+"_embeddedbi_continue_dashboard_button"&&e.toolbarButtons.splice(t,1):e.toolbarButtons[`${t}`].elementId!=this.embedOptions.embedContainerId+"_embeddedbi_continue_dashboard_button"&&e.toolbarButtons[`${t}`].elementId!=this.embedOptions.embedContainerId+"_embeddedbi_cancelButton"||e.toolbarButtons.splice(t,1);this.isNewConnection=!1;const t=window[this.embedOptions.dashboardSettings.beforeDatasourceToolbarButtonsRendered];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.beforeDatasourceToolbarButtonsRendered instanceof Function&&this.embedOptions.dashboardSettings.beforeDatasourceToolbarButtonsRendered.call(this,e)}_onBoldBIbeforeDatasourceToolbarIconsRendered(e){const t=window[this.embedOptions.dashboardSettings.beforeDatasourceToolbarIconsRendered];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.beforeDatasourceToolbarIconsRendered instanceof Function&&this.embedOptions.dashboardSettings.beforeDatasourceToolbarIconsRendered.call(this,e)}_onBoldBIbeforeDesignerToolbarIconsRendered(e){const t=window[this.embedOptions.dashboardSettings.beforeDesignerToolbarIconsRendered];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.beforeDesignerToolbarIconsRendered instanceof Function&&this.embedOptions.dashboardSettings.beforeDesignerToolbarIconsRendered.call(this,e)}_onBoldBItoolbarClick(e){const t=window[this.embedOptions.dashboardSettings.toolbarClick];t instanceof Function&&t.call(this,e),this.embedOptions.dashboardSettings.toolbarClick instanceof Function&&this.embedOptions.dashboardSettings.toolbarClick.call(this,e)}_onBoldBIbeforeWidgetItemsListed(e){const t=window[this.embedOptions.widgetSettings.beforeWidgetItemsListed];t instanceof Function&&t.call(this,e),this.embedOptions.widgetSettings.beforeWidgetItemsListed instanceof Function&&this.embedOptions.widgetSettings.beforeWidgetItemsListed.call(this,e)}_onBoldBIDashboardWidgetIconClick(e){const t=window[this.onWidgetIconClickFn];t instanceof Function&&t.call(this,e);const i=window[this.embedOptions.widgetSettings.onIconClick];i instanceof Function&&i.call(this,e),this.embedOptions.widgetSettings.onIconClick instanceof Function&&this.embedOptions.widgetSettings.onIconClick.call(this,e)}_onBoldBIonControlMenuClick(e){const t=window[this.embedOptions.widgetSettings.onWidgetControlMenuClick];t instanceof Function&&t.call(this,e),this.embedOptions.widgetSettings.onWidgetControlMenuClick instanceof Function&&this.embedOptions.widgetSettings.onWidgetControlMenuClick.call(this,e)}_onBoldBIDashboardUpdatefavorite(e){const t=window[this.onFavoriteStateChangeFn];t instanceof Function&&t.call(this,e);const i=window[this.embedOptions.dashboardSettings.onFavoriteIconClick];i instanceof Function&&i.call(this,e),this.embedOptions.dashboardSettings.onFavoriteIconClick instanceof Function&&this.embedOptions.dashboardSettings.onFavoriteIconClick.call(this,e)}_onBoldBIWidgetExportRender(e){0==this.embedOptions.exportSettings.showExcel&&(e.iconsinformation=this._arraySlice(e.exportOptionCollection,"id","excel")),0==this.embedOptions.exportSettings.showImage&&(e.iconsinformation=this._arraySlice(e.exportOptionCollection,"id","image")),0==this.embedOptions.exportSettings.showPDF&&(e.iconsinformation=this._arraySlice(e.exportOptionCollection,"id","pdf")),0==this.embedOptions.exportSettings.showCSV&&(e.iconsinformation=this._arraySlice(e.exportOptionCollection,"id","csv"))}_onBoldBIBeforeNavigateUrlLinking(e){const t=window[this.embedOptions.beforeNavigateUrlLinking];t instanceof Function&&t.call(this,e),this.embedOptions.beforeNavigateUrlLinking instanceof Function&&this.embedOptions.beforeNavigateUrlLinking.call(this,e)}_onBoldBIBeforeNavigateToDashboard(e){const t=window[this.embedOptions.beforeNavigateToDashboard];t instanceof Function&&t.call(this,e),this.embedOptions.beforeNavigateToDashboard instanceof Function&&this.embedOptions.beforeNavigateToDashboard.call(this,e)}_onBoldBIAuthorizionComplete(e){const t=window[this.embedOptions.authorizationServer.authorizionComplete];t instanceof Function&&t.call(this,e),this.embedOptions.authorizationServer.authorizionComplete instanceof Function&&this.embedOptions.authorizationServer.authorizionComplete.call(this,e)}_showLoader(){const e=document.createElement("style");e.innerHTML="#"+this.embedOptions.embedContainerId+" .viewer-blue-loader { display: block !important; }\t #"+this.embedOptions.embedContainerId+" .loader-icon { display: block; } #"+this.embedOptions.embedContainerId+" .loader-icon { left: 0px !important; position: relative; margin: 0px auto; width: 54px; height: 54px; } #"+this.embedOptions.embedContainerId+" .loader-icon .circular { -webkit-animation: rotate 2s linear infinite; animation: rotate 2s linear infinite; height: 54px; width: 54px; position: relative; } #"+this.embedOptions.embedContainerId+" .loader-icon .path { stroke-dasharray: 1,200; stroke-dashoffset: 0; -webkit-animation: dash 1.5s ease-in-out infinite; animation: dash 1.5s ease-in-out infinite; stroke: #5592FB; stroke-linecap: square; } @keyframes rotate { 100% { transform: rotate(360deg); } } @-webkit-keyframes rotate { 100% { transform: rotate(360deg); } } @keyframes dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35; } 100% { stroke-dasharray: 89,200; stroke-dashoffset: -124; } } @-webkit-keyframes dash { 0% { stroke-dasharray: 1,200; stroke-dashoffset: 0; } 50% { stroke-dasharray: 89,200; stroke-dashoffset: -35; } 100% { stroke-dasharray: 89,200; stroke-dashoffset: -124; } }",document.head.appendChild(e);const t='<div class="preloader-wrap viewer-blue-loader" style="display: none; width: '+this.embedOptions.width+";height: "+this.embedOptions.height+'; top: 0; bottom: 0; z-index : 2;"> <div id="loader_image" align="center" style="position:relative;top:45%;"> <div class="loader-blue loader-icon" id="loader-icon"> <svg class="circular"> <circle class="path" cx="27" cy="27" r="20" fill="none" stroke-width="4" stroke-miterlimit="10"></circle> </svg> </div> </div> </div>';this._removeElement("embedded-bi-error"),document.getElementById(this.embedOptions.embedContainerId).insertAdjacentHTML("afterbegin",t)}_getAuthorizationToken(e){const t=e||this.embedOptions.dashboardId;let n="embed_nonce="+this._uuidv4Generartor()+"&embed_dashboard_id="+t+"&embed_dashboard_path="+this.embedOptions.dashboardPath+"&pinboard_name="+(this.pinBoardRendered?this.embedOptions.pinboardName:"")+"&embed_mode="+this.embedOptions.mode+"&embed_timestamp="+Math.round((new Date).getTime()/1e3)+"&embed_expirationtime="+this.embedOptions.expirationTime;if(this.isWidgetMode)if(0==this.isMultipleWidgetMode)n=n+"&embed_widget_isenabled="+this.isWidgetMode+"&embed_widget_name="+this.widgetName;else{const e=[];this.embedOptions.widgetList.forEach((function(t){e.push(t.widgetName.toLowerCase())})),n=n+"&embed_widget_isenabled="+this.isWidgetMode+"&embed_widget_list="+e}this.isMultiTab&&(n=n+"&isMultiTab="+this.isMultiTab),this._isEmptyOrSpaces(this.embedOptions.datasourceId)?this._isEmptyOrSpaces(this.embedOptions.datasourceName)||(n=n+"&embed_datasource_name="+this.embedOptions.datasourceName):n=n+"&embed_datasource_id="+this.embedOptions.datasourceId;const s={embedQuerString:encodeURI(n),dashboardServerApiUrl:this.dashboardServerApiUrl};""!=this.embedOptions.authorizationServer.url?this._xhrRequestHelper("POST",this.embedOptions.authorizationServer.url,s,this.embedOptions.authorizationServer.headers,this._renderDashboard):this._isNullOrUndefined(this.embedOptions.authorizationServer.data)||""==this.embedOptions.authorizationServer.data||""!=this.embedOptions.authorizationServer.url?i.ajax({async:!0,type:"POST",url:this.dashboardServerApiUrl+this.embedAuthorizeEndPoint,data:JSON.stringify(n),contentType:"application/json",success:i.proxy(this._renderDashboard,this)}):this._renderDashboard(this.embedOptions.authorizationServer.data),this.pinBoardRendered=!0}_xhrRequestHelper(e,t,i,n,s){const o=this,a=new XMLHttpRequest;a.open(e,t,!0),a.responseType="json",a.setRequestHeader("Content-type","application/json");for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&a.setRequestHeader(e,n[`${e}`]);a.onreadystatechange=this.Invoke((function(){if(4==a.readyState&&200==a.status)s.call(o,"object"==typeof a.response?a.response:JSON.parse(a.response));else{if(4==a.readyState&&404==a.status)throw new Error("Server not found");if(4==a.readyState)throw new Error(a.statusText)}})),a.send(JSON.stringify(i))}_emptyHtml(e){document.getElementById(e).innerHTML=""}_removeElement(e){const t=document.getElementById(e);null!=t&&t.parentNode.removeChild(t)}_uuidv4Generartor(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}_isEmptyOrSpaces(e){return void 0===e||null==e||null!=e.match(/^ *$/)}_isNullOrUndefined(e){return null==e||null==e}_isUrl(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"==t.protocol||"https:"==t.protocol}_throwError(e,t){if(t=this._isEmptyOrSpaces(t)?this.embedOptions.embedContainerId:t){this._removeElementsClass(t,".preloader-wrap","viewer-blue-loader"),"Object reference not set to an instance of an object."===e&&("view"!==this.embedOptions.mode&&"design"!==this.embedOptions.mode||(this._isEmptyOrSpaces(this.embedOptions.dashboardId)&&this._isEmptyOrSpaces(this.embedOptions.dashboardPath)||(e="Invalid dashboard path."),this._isEmptyOrSpaces(this.embedOptions.pinboardName)||(e="Invalid pinboard name.")));const i='<div id="embedded-bi-error" style="display:table;height:100%;width:100%;"><div style="display: table-cell;vertical-align: middle;text-align: center;"><div style="display: inline-block;"><img src='+this.errorImage+' style="float: left"/><div style="float: left;margin-left: 10px;line-height: 20px;">BoldBI Embedded: '+e+"</div></div>";document.getElementById(t).innerHTML=i}else alert(e);if(this._isNullOrUndefined(this.embedOptions.onError)||""==this.embedOptions.onError)throw new Error("BoldBI Embedded: "+e);{const t=new Error("BoldBI Embedded: "+e);this.onErrorClient(t)}}onErrorClient(e){const t={errorStatus:!0,StatusMessage:e,StatusCode:500},i=window[this.embedOptions.onError];i instanceof Function&&i.call(this,t),this.embedOptions.onError instanceof Function&&this.embedOptions.onError.call(this,t)}_removeElementsClass(e,t,i){let n=[];this._isEmptyOrSpaces(e)?n=document.querySelector(t):this._isEmptyOrSpaces(t)?n.push(document.getElementById(e)):n=document.getElementById(e).querySelectorAll(t),n.forEach(function(e){this._removeClass(e,i)}.bind(this))}_hasClass(e,t){if(e.classList)return e.classList.contains(t);const i=RegExp;return!!e.className.match(new i("(\\s|^)"+t+"(\\s|$)"))}_addClass(e,t){e.classList?e.classList.add(t):this._hasClass(e,t)||(e.className+=" "+t)}_removeClass(e,t){if(e.classList)e.classList.remove(t);else if(this._hasClass(e,t)){const i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}}_arraySlice(e,t,i){return e.forEach(function(e,n,s){e[`${t}`]==i&&s.splice(n,1)}.bind(this)),e}_getFilterData(e){const t={masterData:[]},n=decodeURI(e).replace(/~&~/g,String.fromCharCode(251)+String.fromCharCode(251)).replace(/~=~/g,String.fromCharCode(250)+String.fromCharCode(250)).replace(/~[?]~/g,String.fromCharCode(253)+String.fromCharCode(253)).replace(/~[/]~/g,String.fromCharCode(254)+String.fromCharCode(254)).replace(/&&/g,"&").replace(/&/g,"|,|").replace(/=/g,"|:|").replace(/~,~/g,String.fromCharCode(252)+String.fromCharCode(252)).split("|,|");for(let e=0;e<n.length;e++){const s=n[`${e}`].split("|:|");if(s.length>=2&&"FILTERQUERY"==s[0].trim().toUpperCase()){const e=s[1],n=i.parseJSON(e);""!=n&&0!=n.length&&(t.masterData=this._lengthensSelectedFilterInfo(n),this._unEscapeSelectedFilterDataforURLFilter(t.masterData))}}return this._createFilterCollection(t.masterData)}_createFilterCollection(e){if(e){const t=[];return e.forEach(function(e){let i=e.ColumnName,n=[];e.InitialDateFilter.DisplayDateFilterList.length>0&&(n=e.InitialDateFilter.DisplayDateFilterList,e.IsRange&&(n=[n[0]+" - "+n[1]])),e.InitialMeasureFilter.Values.length>0&&(n=e.InitialMeasureFilter.Values),e.InitialDimensionFilter.Text.length>0&&(n=e.InitialDimensionFilter.Text,i=i+" ("+e.InitialDimensionFilter.DimesnionFilterCondition+")"),e.InitialDimensionFilter.Text.length>0&&(n=e.InitialDimensionFilter.Text),t.push({ColumnName:i,Values:n})}.bind(this)),t}}_lengthensSelectedFilterInfo(e){const t=[],i=e.length;for(let n=0;n<i;n++){const i=e[`${n}`],s=new SelectedFilterValue;this._hasValue(i,shortenEnum.UniqueColumnName)&&(s[lengthenEnum.UniqueColumnName]=i[shortenEnum.UniqueColumnName]),this._hasValue(i,shortenEnum.ReportName)&&(s[lengthenEnum.ReportName]=i[shortenEnum.ReportName]),this._hasValue(i,shortenEnum.IsStdDateTime)&&(s[lengthenEnum.IsStdDateTime]=i[shortenEnum.IsStdDateTime]),this._hasValue(i,shortenEnum.IsRange)&&(s[lengthenEnum.IsRange]=i[shortenEnum.IsRange]),this._hasValue(i,shortenEnum.IsGroupBarFilter)&&(s[lengthenEnum.IsGroupBarFilter]=i[shortenEnum.IsGroupBarFilter]),this._hasValue(i,shortenEnum.IsMultiSelection)&&(s[lengthenEnum.IsMultiSelection]=i[shortenEnum.IsMultiSelection]),this._hasValue(i,shortenEnum.ColumnName)&&(s[lengthenEnum.ColumnName]=i[shortenEnum.ColumnName]),this._hasValue(i,shortenEnum.FieldId)&&(s[lengthenEnum.FieldId]=i[shortenEnum.FieldId]),this._hasValue(i,shortenEnum.IsPoPWidget)&&(s[lengthenEnum.IsPoPWidget]=i[shortenEnum.IsPoPWidget]),this._hasValue(i,shortenEnum.InitialDateFilter)&&(this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.DateFilterCondition)&&(s.InitialDateFilter[lengthenEnum.DateFilterCondition]=i[shortenEnum.InitialDateFilter][shortenEnum.DateFilterCondition]),this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.DateFilterList)&&(s.InitialDateFilter[lengthenEnum.DateFilterList]=i[shortenEnum.InitialDateFilter][shortenEnum.DateFilterList]),this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.DateFilterType)&&(s.InitialDateFilter[lengthenEnum.DateFilterType]=i[shortenEnum.InitialDateFilter][shortenEnum.DateFilterType]),this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.DisplayDateFilterList)&&(s.InitialDateFilter[lengthenEnum.DisplayDateFilterList]=i[shortenEnum.InitialDateFilter][shortenEnum.DisplayDateFilterList]),this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.DateFormat)&&(s.InitialDateFilter[lengthenEnum.DateFormat]=i[shortenEnum.InitialDateFilter][shortenEnum.DateFormat]),this._hasValue(i[shortenEnum.InitialDateFilter],shortenEnum.SelectedRangeforRelativeFilter)&&(s.InitialDateFilter[lengthenEnum.SelectedRangeforRelativeFilter]=i[shortenEnum.InitialDateFilter][shortenEnum.SelectedRangeforRelativeFilter])),this._hasValue(i,shortenEnum.InitialDimensionFilter)&&(this._hasValue(i[shortenEnum.InitialDimensionFilter],shortenEnum.DimesnionFilterCondition)&&(s.InitialDimensionFilter[lengthenEnum.DimesnionFilterCondition]=i[shortenEnum.InitialDimensionFilter][shortenEnum.DimesnionFilterCondition]),this._hasValue(i[shortenEnum.InitialDimensionFilter],shortenEnum.Text)&&(s.InitialDimensionFilter[lengthenEnum.Text]=i[shortenEnum.InitialDimensionFilter][shortenEnum.Text])),this._hasValue(i,shortenEnum.InitialMeasureFilter)&&(this._hasValue(i[shortenEnum.InitialMeasureFilter],shortenEnum.MeasureFilterCondition)&&(s.InitialMeasureFilter[lengthenEnum.MeasureFilterCondition]=i[shortenEnum.InitialMeasureFilter][shortenEnum.MeasureFilterCondition]),this._hasValue(i[shortenEnum.InitialMeasureFilter],shortenEnum.Values)&&(s.InitialMeasureFilter[lengthenEnum.Values]=i[shortenEnum.InitialMeasureFilter][shortenEnum.Values])),this._hasValue(i,shortenEnum.PoPFilter)&&(this._hasValue(i[shortenEnum.PoPFilter],shortenEnum.DateFieldId)&&(s.PoPFilter[lengthenEnum.DateFieldId]=i[shortenEnum.PoPFilter][shortenEnum.DateFieldId]),this._hasValue(i[shortenEnum.PoPFilter],shortenEnum.PrimaryType)&&(s.PoPFilter[lengthenEnum.PrimaryType]=i[shortenEnum.PoPFilter][shortenEnum.PrimaryType]),this._hasValue(i[shortenEnum.PoPFilter],shortenEnum.SecondaryType)&&(s.PoPFilter[lengthenEnum.SecondaryType]=i[shortenEnum.PoPFilter][shortenEnum.SecondaryType]),this._hasValue(i[shortenEnum.PoPFilter],shortenEnum.PrimaryCustomRange)&&(s.PoPFilter[lengthenEnum.PrimaryCustomRange][lengthenEnum.StartRange]=i[shortenEnum.PoPFilter][shortenEnum.PrimaryCustomRange][shortenEnum.StartRange],s.PoPFilter[lengthenEnum.PrimaryCustomRange][lengthenEnum.EndRange]=i[shortenEnum.PoPFilter][shortenEnum.PrimaryCustomRange][shortenEnum.EndRange]),this._hasValue(i[shortenEnum.PoPFilter],shortenEnum.SecondaryCustomRange)&&i[shortenEnum.PoPFilter][shortenEnum.SecondaryCustomRange].length>0&&(s.PoPFilter[lengthenEnum.SecondaryCustomRange][0][lengthenEnum.StartRange]=i[shortenEnum.PoPFilter][shortenEnum.SecondaryCustomRange][0][shortenEnum.StartRange],s.PoPFilter[lengthenEnum.SecondaryCustomRange][0][lengthenEnum.EndRange]=i[shortenEnum.PoPFilter][shortenEnum.SecondaryCustomRange][0][shortenEnum.EndRange])),this._hasValue(s,lengthenEnum.UniqueColumnName)&&this._hasValue(s,lengthenEnum.ReportName)&&t.push(s)}return t}_hasValue(e,t){return!this._isNullOrUndefined(e)&&!this._isNullOrUndefined(e[`${t}`])}_unEscapeSelectedFilterDataforURLFilter(e){for(let t=0;t<e.length;t++){const i=e[`${t}`];if(!this._isNullOrUndefined(i.InitialDimensionFilter.Text)&&0!=i.InitialDimensionFilter.Text.length)for(let e=0;e<i.InitialDimensionFilter.Text.length;e++)i.InitialDimensionFilter.Text[`${e}`]=i.InitialDimensionFilter.Text[`${e}`].replaceAll(String.fromCharCode(252)+String.fromCharCode(252),",").replaceAll(String.fromCharCode(251)+String.fromCharCode(251),"&").replaceAll(String.fromCharCode(250)+String.fromCharCode(250),"=").replaceAll(String.fromCharCode(253)+String.fromCharCode(253),"?").replaceAll(String.fromCharCode(254)+String.fromCharCode(254),"/")}return e}_getWidgetFilterInfo(){const e=this._widgetsCollection,t=[];if(1==Array.isArray(e))for(let i=0;i<e.length;i++){let n=s._gettinstance(document.getElementById(this.embedOptions.embedContainerId),"embeddedBoldBIWidget_"+e[`${i}`]);n=Array.isArray(n)?n:[n];const o=[];let a;for(let e=0;e<n.length;e++)a=n[`${e}`].includes("=")?{columnName:n[`${e}`].split("=")[0].toString(),values:n[`${e}`].split("=")[1].split(",")}:{values:n},o[o.length]=a;const d={id:e[`${i}`],filters:o};t[t.length]=d}return t}addStyles(){this._loadDepedentFiles()}destroyStyles(){const e=this;document.querySelectorAll("link").forEach((function(t){e.cssFiles.forEach((function(e){-1!=t.href.toLowerCase().indexOf(e.toLowerCase())&&t.parentNode.removeChild(t)}))}))}updateInFilterOverviewUI(e){let t={};t=this.isMultiTab?window.bbEmbed(".e-content .e-active").find(".bbembed-multitab-dbrd").data("BoldBIDashboardDesigner"):this._getDashboardInstance(),t&&t._updateFilterOverview(e.ViewName,e.ViewId)}static _putinstance(e,t,i){s._storage.has(e)||s._storage.set(e,new Map),s._storage.get(e).set(t,i)}static _gettinstance(e,t){if(s._storage.has(e))return s._storage.get(e).get(t)}static _hasinstance(e,t){return s._storage.has(e)&&s._storage.get(e).has(t)}static _removeinstance(e,t){if(s._storage.has(e)){const i=s._storage.get(e).delete(t);return 0!=s._storage.get(e).size&&s._storage.delete(e),i}}}t.NV=s,s.Mode=Object.freeze({View:"view",Design:"design",Connection:"connection",DataSource:"datasource"}),s.EmbedType=Object.freeze({Component:"component",IFrame:"iframe"}),s.Environment=Object.freeze({Enterprise:"onpremise",Cloud:"cloud"}),s.Theme=Object.freeze({Off:"off",Light:"light",Dark:"dark"}),s._storage=new WeakMap,s._widgetsCollection=[];class o{constructor(){this.containerID="",this.widgetCollection=[]}setFilterParameters(e){const t=this.widgetCollection;1==Array.isArray(t)&&s._hasinstance(document.getElementById(this.containerID),"embeddedBoldBIWidget_"+t[t.length-1])&&s._putinstance(document.getElementById(this.containerID),"embeddedBoldBIWidget_"+t[t.length-1],e)}}}},i={};e=function e(n){var s=i[n];if(void 0!==s)return s.exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}(590),window.BoldBI=e.NV})();